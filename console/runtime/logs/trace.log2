2019-12-02 15:28:14 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2019-12-02 15:28:14 [info][yii\db\Command::query] SELECT * from `order` where (order_state = 1 )
2019-12-02 15:28:14 [info][yii\db\Command::query] SELECT
			            price,
			            time
			        FROM
			            data_xau
			        ORDER BY
			            id DESC
			        LIMIT 1
2019-12-02 15:28:14 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2019-12-02 15:28:14 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2019-12-02 15:28:14 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('1465.280', '2019-12-02 15:28:14')
2019-12-02 15:28:14 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='1465.280', `open`='1470.300', `high`='1470.600', `low`='1464.200', `close`='1472.700', `diff`='-7.4200000000001', `diff_rate`='', `time`='2019-12-02 15:28:14' WHERE `name`='xau'
2019-12-02 15:28:14 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2019-12-02 15:28:14 [info][yii\db\Command::query] SELECT * from `order` where (order_state = 1 )
2019-12-02 15:28:15 [info][yii\db\Command::query] SELECT
			            price,
			            time
			        FROM
			            data_yb
			        ORDER BY
			            id DESC
			        LIMIT 1
2019-12-02 15:28:15 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_yb`
2019-12-02 15:28:15 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_yb' AND kcu.table_name = 'data_yb'
2019-12-02 15:28:15 [info][yii\db\Command::execute] INSERT INTO `data_yb` (`price`, `time`) VALUES ('211.77', '2019-12-02 15:28:15')
2019-12-02 15:28:15 [info][yii\db\Command::query] SELECT * FROM `data_all` `dataAll` WHERE `name`='yb'
2019-12-02 15:28:15 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='211.77', `open`='214.91', `high`='217.88', `low`='209.54', `close`='211.98', `diff`='-0.20999999999998', `diff_rate`='-0.1', `time`='2019-12-02 15:28:15' WHERE `name`='yb'
2019-12-02 15:28:15 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2019-12-02 15:28:15 [info][yii\db\Command::query] SELECT * from `order` where (order_state = 1 )
2019-12-02 15:28:15 [info][yii\web\Session::open] Session started
2019-12-02 15:28:15 [info][yii\db\Command::query] SELECT * FROM `data_all` `dataAll` WHERE `name`='btc'
2019-12-02 15:28:15 [info][yii\db\Command::query] SELECT price FROM data_btc WHERE time > "2019-12-02 00:00:00" ORDER BY price DESC LIMIT 1
2019-12-02 15:28:15 [info][yii\db\Command::query] SELECT price FROM data_btc WHERE time > "2019-12-02 00:00:00" ORDER BY price ASC LIMIT 1
2019-12-02 15:28:15 [info][yii\db\Command::query] SELECT
			            price,
			            time
			        FROM
			            data_btc
			        ORDER BY
			            id DESC
			        LIMIT 1
2019-12-02 15:28:15 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btc`
2019-12-02 15:28:15 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btc' AND kcu.table_name = 'data_btc'
2019-12-02 15:28:15 [info][yii\db\Command::execute] INSERT INTO `data_btc` (`price`, `time`) VALUES (21228.35, '2019-12-02 15:28:15')
2019-12-02 15:28:15 [info][yii\db\Command::query] SELECT * FROM `data_all` `dataAll` WHERE `name`='btc'
2019-12-02 15:28:15 [info][yii\db\Command::execute] UPDATE `data_all` SET `high`='21550.05', `low`='21206.35', `price`='21228.35', `time`='2019-12-02 15:28:15', `diff`='10953.86', `diff_rate`='106.61' WHERE `name`='btc'
2019-12-02 15:28:15 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2019-12-02 15:28:15 [info][yii\db\Command::query] SELECT * from `order` where (order_state = 1 )
2019-12-02 15:28:16 [info][yii\db\Command::query] SELECT
			            price,
			            time
			        FROM
			            data_tdb
			        ORDER BY
			            id DESC
			        LIMIT 1
2019-12-02 15:28:16 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_tdb`
2019-12-02 15:28:16 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_tdb' AND kcu.table_name = 'data_tdb'
2019-12-02 15:28:16 [info][yii\db\Command::execute] INSERT INTO `data_tdb` (`price`, `time`) VALUES ('5899.950', '2019-12-02 15:28:16')
2019-12-02 15:28:16 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='5899.950', `open`='5887.500', `high`='5908.500', `low`='5886.000', `close`='5864.000', `diff`='35.95', `diff_rate`='', `time`='2019-12-02 15:28:16' WHERE `name`='tdb'
2019-12-02 15:28:16 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2019-12-02 15:28:16 [info][yii\db\Command::query] SELECT * from `order` where (order_state = 1 )
2019-12-02 15:28:16 [info][yii\db\Command::query] SELECT
			            price,
			            time
			        FROM
			            data_a50
			        ORDER BY
			            id DESC
			        LIMIT 1
2019-12-02 15:28:16 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_a50`
2019-12-02 15:28:16 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_a50' AND kcu.table_name = 'data_a50'
2019-12-02 15:28:16 [info][yii\db\Command::execute] INSERT INTO `data_a50` (`price`, `time`) VALUES ('13611.750', '2019-12-02 15:28:16')
2019-12-02 15:28:16 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='13611.750', `open`='13582.500', `high`='13672.500', `low`='13582.500', `close`='13580.000', `diff`='31.75', `diff_rate`='', `time`='2019-12-02 15:28:16' WHERE `name`='a50'
2019-12-02 15:28:16 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2019-12-02 15:28:16 [info][yii\db\Command::query] SELECT * from `order` where (order_state = 1 )
2019-12-02 15:28:16 [info][yii\db\Command::query] SELECT
			            price,
			            time
			        FROM
			            data_hz
			        ORDER BY
			            id DESC
			        LIMIT 1
2019-12-02 15:28:16 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_hz`
2019-12-02 15:28:16 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_hz' AND kcu.table_name = 'data_hz'
2019-12-02 15:28:16 [info][yii\db\Command::execute] INSERT INTO `data_hz` (`price`, `time`) VALUES ('26492.300', '2019-12-02 15:28:16')
2019-12-02 15:28:16 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='26492.300', `open`='26373.000', `high`='26576.000', `low`='26337.000', `close`='26333.000', `diff`='159.3', `diff_rate`='', `time`='2019-12-02 15:28:16' WHERE `name`='hz'
2019-12-02 15:28:16 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2019-12-02 15:28:16 [info][yii\db\Command::query] SELECT * from `order` where (order_state = 1 )
2019-12-02 15:28:47 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2019-12-02 15:28:47 [trace][yii\base\Controller::runAction] Route to run: init/data
2019-12-02 15:28:47 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionData()
2019-12-02 15:28:47 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id`, `risk` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2019-12-02 15:28:47 [info][yii\db\Connection::open] Opening DB connection: mysql:host=mysql;port=3306;dbname=weiqihuo
2019-12-02 15:28:47 [info][yii\db\Command::query] SELECT
			            price,
			            time
			        FROM
			            data_cl
			        ORDER BY
			            id DESC
			        LIMIT 1
2019-12-02 15:28:47 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2019-12-02 15:28:47 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_cl`
2019-12-02 15:28:47 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_cl' AND kcu.table_name = 'data_cl'
2019-12-02 15:28:47 [info][yii\db\Command::execute] INSERT INTO `data_cl` (`price`, `time`) VALUES ('55.943', '2019-12-02 15:28:47')
2019-12-02 15:28:47 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2019-12-02 15:28:47 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2019-12-02 15:28:47 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='55.943', `open`='55.470', `high`='56.240', `low`='55.420', `close`='55.170', `diff`='0.773', `diff_rate`='', `time`='2019-12-02 15:28:47' WHERE `name`='cl'
2019-12-02 15:28:47 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2019-12-02 15:28:47 [info][yii\db\Command::query] SELECT * from `order` where (order_state = 1 )
2019-12-02 15:28:47 [info][yii\db\Command::query] SELECT
			            price,
			            time
			        FROM
			            data_xau
			        ORDER BY
			            id DESC
			        LIMIT 1
2019-12-02 15:28:47 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2019-12-02 15:28:47 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2019-12-02 15:28:47 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('1465.370', '2019-12-02 15:28:47')
2019-12-02 15:28:47 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='1465.370', `open`='1470.300', `high`='1470.600', `low`='1464.200', `close`='1472.700', `diff`='-7.3300000000002', `diff_rate`='', `time`='2019-12-02 15:28:47' WHERE `name`='xau'
2019-12-02 15:28:47 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2019-12-02 15:28:47 [info][yii\db\Command::query] SELECT * from `order` where (order_state = 1 )
2019-12-02 15:28:48 [info][yii\db\Command::query] SELECT
			            price,
			            time
			        FROM
			            data_yb
			        ORDER BY
			            id DESC
			        LIMIT 1
2019-12-02 15:28:48 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_yb`
2019-12-02 15:28:48 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_yb' AND kcu.table_name = 'data_yb'
2019-12-02 15:28:48 [info][yii\db\Command::execute] INSERT INTO `data_yb` (`price`, `time`) VALUES ('211.77', '2019-12-02 15:28:48')
2019-12-02 15:28:48 [info][yii\db\Command::query] SELECT * FROM `data_all` `dataAll` WHERE `name`='yb'
2019-12-02 15:28:48 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='211.77', `open`='214.91', `high`='217.88', `low`='209.54', `close`='211.98', `diff`='-0.20999999999998', `diff_rate`='-0.1', `time`='2019-12-02 15:28:48' WHERE `name`='yb'
2019-12-02 15:28:48 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2019-12-02 15:28:48 [info][yii\db\Command::query] SELECT * from `order` where (order_state = 1 )
2019-12-02 15:28:48 [info][yii\web\Session::open] Session started
2019-12-02 15:28:48 [info][yii\db\Command::query] SELECT * FROM `data_all` `dataAll` WHERE `name`='btc'
2019-12-02 15:28:48 [info][yii\db\Command::query] SELECT price FROM data_btc WHERE time > "2019-12-02 00:00:00" ORDER BY price DESC LIMIT 1
2019-12-02 15:28:48 [info][yii\db\Command::query] SELECT price FROM data_btc WHERE time > "2019-12-02 00:00:00" ORDER BY price ASC LIMIT 1
2019-12-02 15:28:48 [info][yii\db\Command::query] SELECT
			            price,
			            time
			        FROM
			            data_btc
			        ORDER BY
			            id DESC
			        LIMIT 1
2019-12-02 15:28:48 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btc`
2019-12-02 15:28:48 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btc' AND kcu.table_name = 'data_btc'
2019-12-02 15:28:48 [info][yii\db\Command::execute] INSERT INTO `data_btc` (`price`, `time`) VALUES (21231.35, '2019-12-02 15:28:48')
2019-12-02 15:28:48 [info][yii\db\Command::query] SELECT * FROM `data_all` `dataAll` WHERE `name`='btc'
2019-12-02 15:28:48 [info][yii\db\Command::execute] UPDATE `data_all` SET `high`='21550.05', `low`='21206.35', `price`='21231.35', `time`='2019-12-02 15:28:48', `diff`='10956.86', `diff_rate`='106.64' WHERE `name`='btc'
2019-12-02 15:28:48 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2019-12-02 15:28:48 [info][yii\db\Command::query] SELECT * from `order` where (order_state = 1 )
2019-12-02 15:28:49 [info][yii\db\Command::query] SELECT
			            price,
			            time
			        FROM
			            data_tdb
			        ORDER BY
			            id DESC
			        LIMIT 1
2019-12-02 15:28:49 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_tdb`
2019-12-02 15:28:49 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_tdb' AND kcu.table_name = 'data_tdb'
2019-12-02 15:28:49 [info][yii\db\Command::execute] INSERT INTO `data_tdb` (`price`, `time`) VALUES ('5899.950', '2019-12-02 15:28:49')
2019-12-02 15:28:49 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='5899.950', `open`='5887.500', `high`='5908.500', `low`='5886.000', `close`='5864.000', `diff`='35.95', `diff_rate`='', `time`='2019-12-02 15:28:49' WHERE `name`='tdb'
2019-12-02 15:28:49 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2019-12-02 15:28:49 [info][yii\db\Command::query] SELECT * from `order` where (order_state = 1 )
2019-12-02 15:28:49 [info][yii\db\Command::query] SELECT
			            price,
			            time
			        FROM
			            data_a50
			        ORDER BY
			            id DESC
			        LIMIT 1
2019-12-02 15:28:49 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_a50`
2019-12-02 15:28:49 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_a50' AND kcu.table_name = 'data_a50'
2019-12-02 15:28:49 [info][yii\db\Command::execute] INSERT INTO `data_a50` (`price`, `time`) VALUES ('13605.000', '2019-12-02 15:28:49')
2019-12-02 15:28:49 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='13605.000', `open`='13582.500', `high`='13672.500', `low`='13582.500', `close`='13580.000', `diff`='25', `diff_rate`='', `time`='2019-12-02 15:28:49' WHERE `name`='a50'
2019-12-02 15:28:49 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2019-12-02 15:28:49 [info][yii\db\Command::query] SELECT * from `order` where (order_state = 1 )
2019-12-02 15:28:49 [info][yii\db\Command::query] SELECT
			            price,
			            time
			        FROM
			            data_hz
			        ORDER BY
			            id DESC
			        LIMIT 1
2019-12-02 15:28:49 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_hz`
2019-12-02 15:28:49 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_hz' AND kcu.table_name = 'data_hz'
2019-12-02 15:28:49 [info][yii\db\Command::execute] INSERT INTO `data_hz` (`price`, `time`) VALUES ('26489.600', '2019-12-02 15:28:49')
2019-12-02 15:28:49 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='26489.600', `open`='26373.000', `high`='26576.000', `low`='26337.000', `close`='26333.000', `diff`='156.6', `diff_rate`='', `time`='2019-12-02 15:28:49' WHERE `name`='hz'
2019-12-02 15:28:49 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2019-12-02 15:28:49 [info][yii\db\Command::query] SELECT * from `order` where (order_state = 1 )
2019-12-02 15:30:42 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2019-12-02 15:30:42 [trace][yii\base\Controller::runAction] Route to run: init/data
2019-12-02 15:30:42 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionData()
2019-12-02 15:30:42 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id`, `risk` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2019-12-02 15:30:42 [info][yii\db\Connection::open] Opening DB connection: mysql:host=mysql;port=3306;dbname=weiqihuo
2019-12-02 15:30:43 [info][yii\db\Command::query] SELECT
			            price,
			            time
			        FROM
			            data_cl
			        ORDER BY
			            id DESC
			        LIMIT 1
2019-12-02 15:30:43 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2019-12-02 15:30:43 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_cl`
2019-12-02 15:30:43 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_cl' AND kcu.table_name = 'data_cl'
2019-12-02 15:30:43 [info][yii\db\Command::execute] INSERT INTO `data_cl` (`price`, `time`) VALUES ('55.970', '2019-12-02 15:30:43')
2019-12-02 15:30:43 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2019-12-02 15:30:43 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2019-12-02 15:30:43 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='55.970', `open`='55.470', `high`='56.240', `low`='55.420', `close`='55.170', `diff`='0.8', `diff_rate`='', `time`='2019-12-02 15:30:43' WHERE `name`='cl'
2019-12-02 15:30:43 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2019-12-02 15:30:43 [info][yii\db\Command::query] SELECT * from `order` where (order_state = 1 )
2019-12-02 15:30:43 [info][yii\db\Command::query] SELECT
			            price,
			            time
			        FROM
			            data_xau
			        ORDER BY
			            id DESC
			        LIMIT 1
2019-12-02 15:30:43 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2019-12-02 15:30:43 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2019-12-02 15:30:43 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('1465.100', '2019-12-02 15:30:43')
2019-12-02 15:30:43 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='1465.100', `open`='1470.300', `high`='1470.600', `low`='1464.200', `close`='1472.700', `diff`='-7.6000000000001', `diff_rate`='', `time`='2019-12-02 15:30:43' WHERE `name`='xau'
2019-12-02 15:30:43 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2019-12-02 15:30:43 [info][yii\db\Command::query] SELECT * from `order` where (order_state = 1 )
2019-12-02 15:30:44 [info][yii\db\Command::query] SELECT
			            price,
			            time
			        FROM
			            data_yb
			        ORDER BY
			            id DESC
			        LIMIT 1
2019-12-02 15:30:44 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_yb`
2019-12-02 15:30:44 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_yb' AND kcu.table_name = 'data_yb'
2019-12-02 15:30:44 [info][yii\db\Command::execute] INSERT INTO `data_yb` (`price`, `time`) VALUES ('211.52', '2019-12-02 15:30:44')
2019-12-02 15:30:44 [info][yii\db\Command::query] SELECT * FROM `data_all` `dataAll` WHERE `name`='yb'
2019-12-02 15:30:44 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='211.52', `open`='214.91', `high`='217.88', `low`='209.54', `close`='211.98', `diff`='-0.45999999999998', `diff_rate`='-0.22', `time`='2019-12-02 15:30:44' WHERE `name`='yb'
2019-12-02 15:30:44 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2019-12-02 15:30:44 [info][yii\db\Command::query] SELECT * from `order` where (order_state = 1 )
2019-12-02 15:30:44 [info][yii\web\Session::open] Session started
2019-12-02 15:30:44 [info][yii\db\Command::query] SELECT * FROM `data_all` `dataAll` WHERE `name`='btc'
2019-12-02 15:30:44 [info][yii\db\Command::query] SELECT price FROM data_btc WHERE time > "2019-12-02 00:00:00" ORDER BY price DESC LIMIT 1
2019-12-02 15:30:44 [info][yii\db\Command::query] SELECT price FROM data_btc WHERE time > "2019-12-02 00:00:00" ORDER BY price ASC LIMIT 1
2019-12-02 15:30:44 [info][yii\db\Command::query] SELECT
			            price,
			            time
			        FROM
			            data_btc
			        ORDER BY
			            id DESC
			        LIMIT 1
2019-12-02 15:30:44 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btc`
2019-12-02 15:30:44 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btc' AND kcu.table_name = 'data_btc'
2019-12-02 15:30:44 [info][yii\db\Command::execute] INSERT INTO `data_btc` (`price`, `time`) VALUES (21234.35, '2019-12-02 15:30:44')
2019-12-02 15:30:44 [info][yii\db\Command::query] SELECT * FROM `data_all` `dataAll` WHERE `name`='btc'
2019-12-02 15:30:44 [info][yii\db\Command::execute] UPDATE `data_all` SET `high`='21550.05', `low`='21206.35', `price`='21234.35', `time`='2019-12-02 15:30:44', `diff`='10959.86', `diff_rate`='106.67' WHERE `name`='btc'
2019-12-02 15:30:44 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2019-12-02 15:30:44 [info][yii\db\Command::query] SELECT * from `order` where (order_state = 1 )
2019-12-02 15:30:44 [info][yii\db\Command::query] SELECT
			            price,
			            time
			        FROM
			            data_tdb
			        ORDER BY
			            id DESC
			        LIMIT 1
2019-12-02 15:30:44 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_tdb`
2019-12-02 15:30:44 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_tdb' AND kcu.table_name = 'data_tdb'
2019-12-02 15:30:44 [info][yii\db\Command::execute] INSERT INTO `data_tdb` (`price`, `time`) VALUES ('5894.100', '2019-12-02 15:30:44')
2019-12-02 15:30:44 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='5894.100', `open`='5887.500', `high`='5908.500', `low`='5886.000', `close`='5864.000', `diff`='30.1', `diff_rate`='', `time`='2019-12-02 15:30:44' WHERE `name`='tdb'
2019-12-02 15:30:44 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2019-12-02 15:30:44 [info][yii\db\Command::query] SELECT * from `order` where (order_state = 1 )
2019-12-02 15:30:44 [info][yii\db\Command::query] SELECT
			            price,
			            time
			        FROM
			            data_a50
			        ORDER BY
			            id DESC
			        LIMIT 1
2019-12-02 15:30:44 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_a50`
2019-12-02 15:30:44 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_a50' AND kcu.table_name = 'data_a50'
2019-12-02 15:30:44 [info][yii\db\Command::execute] INSERT INTO `data_a50` (`price`, `time`) VALUES ('13598.250', '2019-12-02 15:30:44')
2019-12-02 15:30:44 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='13598.250', `open`='13582.500', `high`='13672.500', `low`='13582.500', `close`='13580.000', `diff`='18.25', `diff_rate`='', `time`='2019-12-02 15:30:44' WHERE `name`='a50'
2019-12-02 15:30:44 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2019-12-02 15:30:44 [info][yii\db\Command::query] SELECT * from `order` where (order_state = 1 )
2019-12-02 15:30:44 [info][yii\db\Command::query] SELECT
			            price,
			            time
			        FROM
			            data_hz
			        ORDER BY
			            id DESC
			        LIMIT 1
2019-12-02 15:30:44 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_hz`
2019-12-02 15:30:44 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_hz' AND kcu.table_name = 'data_hz'
2019-12-02 15:30:44 [info][yii\db\Command::execute] INSERT INTO `data_hz` (`price`, `time`) VALUES ('26479.700', '2019-12-02 15:30:44')
2019-12-02 15:30:44 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='26479.700', `open`='26373.000', `high`='26576.000', `low`='26337.000', `close`='26333.000', `diff`='146.7', `diff_rate`='', `time`='2019-12-02 15:30:44' WHERE `name`='hz'
2019-12-02 15:30:44 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2019-12-02 15:30:44 [info][yii\db\Command::query] SELECT * from `order` where (order_state = 1 )
2019-12-02 15:31:34 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2019-12-02 15:31:34 [trace][yii\base\Controller::runAction] Route to run: init/data
2019-12-02 15:31:34 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionData()
2019-12-02 15:31:47 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2019-12-02 15:31:47 [trace][yii\base\Controller::runAction] Route to run: init/data
2019-12-02 15:31:47 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionData()
2019-12-02 15:33:49 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2019-12-02 15:33:49 [trace][yii\base\Controller::runAction] Route to run: init/data
2019-12-02 15:33:49 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionData()
2019-12-02 15:34:07 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2019-12-02 15:34:07 [trace][yii\base\Controller::runAction] Route to run: init/data
2019-12-02 15:34:07 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionData()
2019-12-02 15:34:42 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2019-12-02 15:34:42 [trace][yii\base\Controller::runAction] Route to run: init/data
2019-12-02 15:34:42 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionData()
2019-12-02 15:35:02 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2019-12-02 15:35:02 [trace][yii\base\Controller::runAction] Route to run: init/data
2019-12-02 15:35:02 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionData()
2019-12-02 15:35:57 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2019-12-02 15:35:57 [trace][yii\base\Controller::runAction] Route to run: init/data
2019-12-02 15:35:57 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionData()
2019-12-02 15:35:57 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id`, `risk` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2019-12-02 15:35:57 [info][yii\db\Connection::open] Opening DB connection: mysql:host=mysql;port=3306;dbname=weiqihuo
2019-12-02 15:35:57 [info][yii\db\Command::query] SELECT
			            price,
			            time
			        FROM
			            data_cl
			        ORDER BY
			            id DESC
			        LIMIT 1
2019-12-02 15:35:57 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2019-12-02 15:35:57 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_cl`
2019-12-02 15:35:57 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_cl' AND kcu.table_name = 'data_cl'
2019-12-02 15:35:57 [info][yii\db\Command::execute] INSERT INTO `data_cl` (`price`, `time`) VALUES ('55.970', '2019-12-02 15:35:57')
2019-12-02 15:35:57 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2019-12-02 15:35:57 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2019-12-02 15:35:57 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='55.970', `open`='55.470', `high`='56.240', `low`='55.420', `close`='55.170', `diff`='0.8', `diff_rate`='', `time`='2019-12-02 15:35:57' WHERE `name`='cl'
2019-12-02 15:35:57 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2019-12-02 15:35:57 [info][yii\db\Command::query] SELECT * from `order` where (order_state = 1 )
2019-12-02 15:35:57 [info][yii\db\Command::query] SELECT
			            price,
			            time
			        FROM
			            data_xau
			        ORDER BY
			            id DESC
			        LIMIT 1
2019-12-02 15:35:57 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2019-12-02 15:35:57 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2019-12-02 15:35:57 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('1465.640', '2019-12-02 15:35:57')
2019-12-02 15:35:57 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='1465.640', `open`='1470.300', `high`='1470.600', `low`='1464.200', `close`='1472.700', `diff`='-7.0599999999999', `diff_rate`='', `time`='2019-12-02 15:35:57' WHERE `name`='xau'
2019-12-02 15:35:57 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2019-12-02 15:35:57 [info][yii\db\Command::query] SELECT * from `order` where (order_state = 1 )
2019-12-02 15:35:58 [info][yii\db\Command::query] SELECT
			            price,
			            time
			        FROM
			            data_yb
			        ORDER BY
			            id DESC
			        LIMIT 1
2019-12-02 15:35:58 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_yb`
2019-12-02 15:35:58 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_yb' AND kcu.table_name = 'data_yb'
2019-12-02 15:35:58 [info][yii\db\Command::execute] INSERT INTO `data_yb` (`price`, `time`) VALUES ('210.97', '2019-12-02 15:35:58')
2019-12-02 15:35:58 [info][yii\db\Command::query] SELECT * FROM `data_all` `dataAll` WHERE `name`='yb'
2019-12-02 15:35:58 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='210.97', `open`='214.91', `high`='217.88', `low`='209.54', `close`='211.98', `diff`='-1.01', `diff_rate`='-0.48', `time`='2019-12-02 15:35:58' WHERE `name`='yb'
2019-12-02 15:35:58 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2019-12-02 15:35:58 [info][yii\db\Command::query] SELECT * from `order` where (order_state = 1 )
2019-12-02 15:35:58 [info][yii\web\Session::open] Session started
2019-12-02 15:35:58 [info][yii\db\Command::query] SELECT * FROM `data_all` `dataAll` WHERE `name`='btc'
2019-12-02 15:35:58 [info][yii\db\Command::query] SELECT price FROM data_btc WHERE time > "2019-12-02 00:00:00" ORDER BY price DESC LIMIT 1
2019-12-02 15:35:58 [info][yii\db\Command::query] SELECT price FROM data_btc WHERE time > "2019-12-02 00:00:00" ORDER BY price ASC LIMIT 1
2019-12-02 15:35:58 [info][yii\db\Command::query] SELECT
			            price,
			            time
			        FROM
			            data_btc
			        ORDER BY
			            id DESC
			        LIMIT 1
2019-12-02 15:35:58 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btc`
2019-12-02 15:35:58 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btc' AND kcu.table_name = 'data_btc'
2019-12-02 15:35:58 [info][yii\db\Command::execute] INSERT INTO `data_btc` (`price`, `time`) VALUES (21237.35, '2019-12-02 15:35:58')
2019-12-02 15:35:58 [info][yii\db\Command::query] SELECT * FROM `data_all` `dataAll` WHERE `name`='btc'
2019-12-02 15:35:58 [info][yii\db\Command::execute] UPDATE `data_all` SET `high`='21550.05', `low`='21206.35', `price`='21237.35', `time`='2019-12-02 15:35:58', `diff`='10962.86', `diff_rate`='106.7' WHERE `name`='btc'
2019-12-02 15:35:58 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2019-12-02 15:35:58 [info][yii\db\Command::query] SELECT * from `order` where (order_state = 1 )
2019-12-02 15:35:58 [info][yii\db\Command::query] SELECT
			            price,
			            time
			        FROM
			            data_tdb
			        ORDER BY
			            id DESC
			        LIMIT 1
2019-12-02 15:35:58 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_tdb`
2019-12-02 15:35:58 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_tdb' AND kcu.table_name = 'data_tdb'
2019-12-02 15:35:58 [info][yii\db\Command::execute] INSERT INTO `data_tdb` (`price`, `time`) VALUES ('5895.450', '2019-12-02 15:35:58')
2019-12-02 15:35:58 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='5895.450', `open`='5887.500', `high`='5908.500', `low`='5886.000', `close`='5864.000', `diff`='31.45', `diff_rate`='', `time`='2019-12-02 15:35:58' WHERE `name`='tdb'
2019-12-02 15:35:58 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2019-12-02 15:35:58 [info][yii\db\Command::query] SELECT * from `order` where (order_state = 1 )
2019-12-02 15:35:58 [info][yii\db\Command::query] SELECT
			            price,
			            time
			        FROM
			            data_a50
			        ORDER BY
			            id DESC
			        LIMIT 1
2019-12-02 15:35:58 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_a50`
2019-12-02 15:35:58 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_a50' AND kcu.table_name = 'data_a50'
2019-12-02 15:35:58 [info][yii\db\Command::execute] INSERT INTO `data_a50` (`price`, `time`) VALUES ('13598.250', '2019-12-02 15:35:58')
2019-12-02 15:35:58 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='13598.250', `open`='13582.500', `high`='13672.500', `low`='13582.500', `close`='13580.000', `diff`='18.25', `diff_rate`='', `time`='2019-12-02 15:35:58' WHERE `name`='a50'
2019-12-02 15:35:58 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2019-12-02 15:35:58 [info][yii\db\Command::query] SELECT * from `order` where (order_state = 1 )
2019-12-02 15:35:58 [info][yii\db\Command::query] SELECT
			            price,
			            time
			        FROM
			            data_hz
			        ORDER BY
			            id DESC
			        LIMIT 1
2019-12-02 15:35:58 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_hz`
2019-12-02 15:35:58 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_hz' AND kcu.table_name = 'data_hz'
2019-12-02 15:35:58 [info][yii\db\Command::execute] INSERT INTO `data_hz` (`price`, `time`) VALUES ('26474.300', '2019-12-02 15:35:58')
2019-12-02 15:35:58 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='26474.300', `open`='26373.000', `high`='26576.000', `low`='26337.000', `close`='26333.000', `diff`='141.3', `diff_rate`='', `time`='2019-12-02 15:35:58' WHERE `name`='hz'
2019-12-02 15:35:58 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2019-12-02 15:35:58 [info][yii\db\Command::query] SELECT * from `order` where (order_state = 1 )
2019-12-02 15:35:58 [info][yii\db\Command::query] SELECT * FROM `order` `order` WHERE `id`='3979'
2019-12-02 15:35:58 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `order`
2019-12-02 15:35:58 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'order' AND kcu.table_name = 'order'
2019-12-02 15:35:58 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`=52
2019-12-02 15:35:58 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2019-12-02 15:35:58 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2019-12-02 15:35:58 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`=52
2019-12-02 15:35:58 [info][yii\db\Command::query] SELECT * FROM `data_all` `dataAll` WHERE `name`='hz'
2019-12-02 15:35:59 [info][yii\db\Command::execute] UPDATE `order` SET `sell_price`='26474.300', `sell_hand`=5, `profit`='-5000', `order_state`=2, `updated_at`='2019-12-02 15:35:58', `updated_by`=0 WHERE `id`=3979
2019-12-02 15:35:59 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `user`
2019-12-02 15:35:59 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'user' AND kcu.table_name = 'user'
2019-12-02 15:35:59 [info][yii\db\Command::query] SELECT * FROM `user` `user` WHERE `id`=173621
2019-12-02 15:35:59 [info][yii\db\Command::query] SELECT * FROM `admin_user` `adminUser` WHERE `id`=35
2019-12-02 15:35:59 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `admin_user`
2019-12-02 15:35:59 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'admin_user' AND kcu.table_name = 'admin_user'
2019-12-02 15:35:59 [info][yii\db\Command::query] SELECT * FROM `admin_user` `parent` WHERE `id`=34
2019-12-02 15:35:59 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `admin_leader`
2019-12-02 15:35:59 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'admin_leader' AND kcu.table_name = 'admin_leader'
2019-12-02 15:35:59 [info][yii\db\Command::query] SELECT * FROM `admin_leader` `adminLeader` WHERE `admin_id`=34
2019-12-02 15:35:59 [info][yii\db\Command::execute] UPDATE `admin_leader` SET `deposit`='201049.25', `updated_at`='2019-12-02 15:35:59' WHERE `admin_id`=34
2019-12-02 15:35:59 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `admin_deposit`
2019-12-02 15:35:59 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'admin_deposit' AND kcu.table_name = 'admin_deposit'
2019-12-02 15:35:59 [info][yii\db\Command::execute] INSERT INTO `admin_deposit` (`admin_id`, `order_id`, `amount`, `user_id`, `created_at`) VALUES (34, 3979, '-5000', 173621, '2019-12-02 15:35:59')
2019-12-02 15:35:59 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `balance_account`
2019-12-02 15:35:59 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'balance_account' AND kcu.table_name = 'balance_account'
2019-12-02 15:35:59 [info][yii\db\Command::execute] INSERT INTO `balance_account` (`order_id`, `user_id`, `balance`, `loss_account`) VALUES (3979, 173621, '0', '-5000')
2019-12-02 15:35:59 [info][yii\db\Command::query] SELECT * FROM `order` `order` WHERE `id`='3980'
2019-12-02 15:35:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`=52
2019-12-02 15:35:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`=52
2019-12-02 15:35:59 [info][yii\db\Command::query] SELECT * FROM `data_all` `dataAll` WHERE `name`='hz'
2019-12-02 15:35:59 [info][yii\db\Command::execute] UPDATE `order` SET `sell_price`='26474.300', `sell_hand`=5, `profit`='-2500', `order_state`=2, `updated_at`='2019-12-02 15:35:59', `updated_by`=0 WHERE `id`=3980
2019-12-02 15:35:59 [info][yii\db\Command::query] SELECT * FROM `user` `user` WHERE `id`=173621
2019-12-02 15:35:59 [info][yii\db\Command::query] SELECT * FROM `admin_user` `adminUser` WHERE `id`=35
2019-12-02 15:35:59 [info][yii\db\Command::query] SELECT * FROM `admin_user` `parent` WHERE `id`=34
2019-12-02 15:35:59 [info][yii\db\Command::query] SELECT * FROM `admin_leader` `adminLeader` WHERE `admin_id`=34
2019-12-02 15:35:59 [info][yii\db\Command::execute] UPDATE `admin_leader` SET `deposit`='203549.25' WHERE `admin_id`=34
2019-12-02 15:35:59 [info][yii\db\Command::execute] INSERT INTO `admin_deposit` (`admin_id`, `order_id`, `amount`, `user_id`, `created_at`) VALUES (34, 3980, '-2500', 173621, '2019-12-02 15:35:59')
2019-12-02 15:35:59 [info][yii\db\Command::execute] INSERT INTO `balance_account` (`order_id`, `user_id`, `balance`, `loss_account`) VALUES (3980, 173621, '0', '-2500')
2019-12-02 15:35:59 [info][yii\db\Command::query] SELECT * FROM `order` `order` WHERE `id`='3981'
2019-12-02 15:35:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`=52
2019-12-02 15:35:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`=52
2019-12-02 15:35:59 [info][yii\db\Command::query] SELECT * FROM `data_all` `dataAll` WHERE `name`='hz'
2019-12-02 15:35:59 [info][yii\db\Command::execute] UPDATE `order` SET `sell_price`='26474.300', `sell_hand`=3, `profit`='-1500', `order_state`=2, `updated_at`='2019-12-02 15:35:59', `updated_by`=0 WHERE `id`=3981
2019-12-02 15:35:59 [info][yii\db\Command::query] SELECT * FROM `user` `user` WHERE `id`=173621
2019-12-02 15:35:59 [info][yii\db\Command::query] SELECT * FROM `admin_user` `adminUser` WHERE `id`=35
2019-12-02 15:35:59 [info][yii\db\Command::query] SELECT * FROM `admin_user` `parent` WHERE `id`=34
2019-12-02 15:35:59 [info][yii\db\Command::query] SELECT * FROM `admin_leader` `adminLeader` WHERE `admin_id`=34
2019-12-02 15:35:59 [info][yii\db\Command::execute] UPDATE `admin_leader` SET `deposit`='205049.25' WHERE `admin_id`=34
2019-12-02 15:35:59 [info][yii\db\Command::execute] INSERT INTO `admin_deposit` (`admin_id`, `order_id`, `amount`, `user_id`, `created_at`) VALUES (34, 3981, '-1500', 173621, '2019-12-02 15:35:59')
2019-12-02 15:35:59 [info][yii\db\Command::execute] INSERT INTO `balance_account` (`order_id`, `user_id`, `balance`, `loss_account`) VALUES (3981, 173621, '0', '-1500')
2019-12-02 15:37:31 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2019-12-02 15:37:31 [trace][yii\base\Controller::runAction] Route to run: init/data
2019-12-02 15:37:31 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionData()
2019-12-02 15:37:31 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id`, `risk` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2019-12-02 15:37:31 [info][yii\db\Connection::open] Opening DB connection: mysql:host=mysql;port=3306;dbname=weiqihuo
2019-12-02 15:37:31 [info][yii\db\Command::query] SELECT
			            price,
			            time
			        FROM
			            data_cl
			        ORDER BY
			            id DESC
			        LIMIT 1
2019-12-02 15:37:31 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2019-12-02 15:37:31 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_cl`
2019-12-02 15:37:31 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_cl' AND kcu.table_name = 'data_cl'
2019-12-02 15:37:31 [info][yii\db\Command::execute] INSERT INTO `data_cl` (`price`, `time`) VALUES ('55.979', '2019-12-02 15:37:31')
2019-12-02 15:37:31 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2019-12-02 15:37:31 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2019-12-02 15:37:31 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='55.979', `open`='55.470', `high`='56.240', `low`='55.420', `close`='55.170', `diff`='0.809', `diff_rate`='', `time`='2019-12-02 15:37:31' WHERE `name`='cl'
2019-12-02 15:37:31 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2019-12-02 15:37:31 [info][yii\db\Command::query] SELECT * from `order` where (order_state = 1 )
2019-12-02 15:37:31 [info][yii\db\Command::query] SELECT
			            price,
			            time
			        FROM
			            data_xau
			        ORDER BY
			            id DESC
			        LIMIT 1
2019-12-02 15:37:31 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2019-12-02 15:37:31 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2019-12-02 15:37:31 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('1465.550', '2019-12-02 15:37:31')
2019-12-02 15:37:31 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='1465.550', `open`='1470.300', `high`='1470.600', `low`='1464.200', `close`='1472.700', `diff`='-7.1500000000001', `diff_rate`='', `time`='2019-12-02 15:37:31' WHERE `name`='xau'
2019-12-02 15:37:31 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2019-12-02 15:37:31 [info][yii\db\Command::query] SELECT * from `order` where (order_state = 1 )
2019-12-02 15:37:32 [info][yii\db\Command::query] SELECT
			            price,
			            time
			        FROM
			            data_yb
			        ORDER BY
			            id DESC
			        LIMIT 1
2019-12-02 15:37:32 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_yb`
2019-12-02 15:37:32 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_yb' AND kcu.table_name = 'data_yb'
2019-12-02 15:37:32 [info][yii\db\Command::execute] INSERT INTO `data_yb` (`price`, `time`) VALUES ('211.25', '2019-12-02 15:37:32')
2019-12-02 15:37:32 [info][yii\db\Command::query] SELECT * FROM `data_all` `dataAll` WHERE `name`='yb'
2019-12-02 15:37:32 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='211.25', `open`='214.91', `high`='217.88', `low`='209.54', `close`='211.98', `diff`='-0.72999999999999', `diff_rate`='-0.34', `time`='2019-12-02 15:37:32' WHERE `name`='yb'
2019-12-02 15:37:32 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2019-12-02 15:37:32 [info][yii\db\Command::query] SELECT * from `order` where (order_state = 1 )
2019-12-02 15:37:32 [info][yii\web\Session::open] Session started
2019-12-02 15:37:32 [info][yii\db\Command::query] SELECT * FROM `data_all` `dataAll` WHERE `name`='btc'
2019-12-02 15:37:32 [info][yii\db\Command::query] SELECT price FROM data_btc WHERE time > "2019-12-02 00:00:00" ORDER BY price DESC LIMIT 1
2019-12-02 15:37:32 [info][yii\db\Command::query] SELECT price FROM data_btc WHERE time > "2019-12-02 00:00:00" ORDER BY price ASC LIMIT 1
2019-12-02 15:37:32 [info][yii\db\Command::query] SELECT
			            price,
			            time
			        FROM
			            data_btc
			        ORDER BY
			            id DESC
			        LIMIT 1
2019-12-02 15:37:32 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btc`
2019-12-02 15:37:32 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btc' AND kcu.table_name = 'data_btc'
2019-12-02 15:37:32 [info][yii\db\Command::execute] INSERT INTO `data_btc` (`price`, `time`) VALUES (21238.35, '2019-12-02 15:37:32')
2019-12-02 15:37:32 [info][yii\db\Command::query] SELECT * FROM `data_all` `dataAll` WHERE `name`='btc'
2019-12-02 15:37:32 [info][yii\db\Command::execute] UPDATE `data_all` SET `high`='21550.05', `low`='21206.35', `price`='21238.35', `time`='2019-12-02 15:37:32', `diff`='10963.86', `diff_rate`='106.71' WHERE `name`='btc'
2019-12-02 15:37:32 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2019-12-02 15:37:32 [info][yii\db\Command::query] SELECT * from `order` where (order_state = 1 )
2019-12-02 15:37:33 [info][yii\db\Command::query] SELECT
			            price,
			            time
			        FROM
			            data_tdb
			        ORDER BY
			            id DESC
			        LIMIT 1
2019-12-02 15:37:33 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_tdb`
2019-12-02 15:37:33 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_tdb' AND kcu.table_name = 'data_tdb'
2019-12-02 15:37:33 [info][yii\db\Command::execute] INSERT INTO `data_tdb` (`price`, `time`) VALUES ('5892.300', '2019-12-02 15:37:33')
2019-12-02 15:37:33 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='5892.300', `open`='5887.500', `high`='5908.500', `low`='5886.000', `close`='5864.000', `diff`='28.3', `diff_rate`='', `time`='2019-12-02 15:37:33' WHERE `name`='tdb'
2019-12-02 15:37:33 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2019-12-02 15:37:33 [info][yii\db\Command::query] SELECT * from `order` where (order_state = 1 )
2019-12-02 15:37:33 [info][yii\db\Command::query] SELECT * FROM `order` `order` WHERE `id`='3983'
2019-12-02 15:37:33 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `order`
2019-12-02 15:37:33 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'order' AND kcu.table_name = 'order'
2019-12-02 15:37:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`=53
2019-12-02 15:37:33 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2019-12-02 15:37:33 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2019-12-02 15:37:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`=53
2019-12-02 15:37:33 [info][yii\db\Command::query] SELECT * FROM `data_all` `dataAll` WHERE `name`='tdb'
2019-12-02 15:37:33 [info][yii\db\Command::execute] UPDATE `order` SET `sell_price`='5892.300', `sell_hand`=1, `sell_deposit`='1000.00', `profit`='500', `order_state`=2, `updated_at`='2019-12-02 15:37:33', `updated_by`=0 WHERE `id`=3983
2019-12-02 15:37:33 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `user`
2019-12-02 15:37:33 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'user' AND kcu.table_name = 'user'
2019-12-02 15:37:33 [info][yii\db\Command::query] SELECT * FROM `user` `user` WHERE `id`=173363
2019-12-02 15:37:33 [info][yii\db\Command::query] SELECT * FROM `admin_user` `adminUser` WHERE `id`=1
2019-12-02 15:37:33 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `admin_user`
2019-12-02 15:37:33 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'admin_user' AND kcu.table_name = 'admin_user'
2019-12-02 15:37:33 [info][yii\db\Command::query] SELECT * FROM `admin_user` `parent` WHERE `id`=0
2019-12-02 15:37:33 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `balance_account`
2019-12-02 15:37:33 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'balance_account' AND kcu.table_name = 'balance_account'
2019-12-02 15:37:33 [info][yii\db\Command::execute] INSERT INTO `balance_account` (`order_id`, `user_id`, `balance`, `profit_account`) VALUES (3983, 173363, '1000', '500')
2019-12-02 15:37:33 [info][yii\db\Command::query] SELECT * FROM `order` `order` WHERE `id`='3995'
2019-12-02 15:37:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`=53
2019-12-02 15:37:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`=53
2019-12-02 15:37:33 [info][yii\db\Command::query] SELECT * FROM `data_all` `dataAll` WHERE `name`='tdb'
2019-12-02 15:37:33 [info][yii\db\Command::execute] UPDATE `order` SET `sell_price`='5892.300', `sell_hand`=1, `sell_deposit`='1000.00', `profit`='500', `order_state`=2, `updated_at`='2019-12-02 15:37:33', `updated_by`=0 WHERE `id`=3995
2019-12-02 15:37:33 [info][yii\db\Command::query] SELECT * FROM `user` `user` WHERE `id`=173365
2019-12-02 15:37:33 [info][yii\db\Command::query] SELECT * FROM `admin_user` `adminUser` WHERE `id`=1
2019-12-02 15:37:33 [info][yii\db\Command::query] SELECT * FROM `admin_user` `parent` WHERE `id`=0
2019-12-02 15:37:33 [info][yii\db\Command::execute] INSERT INTO `balance_account` (`order_id`, `user_id`, `balance`, `profit_account`) VALUES (3995, 173365, '1000', '500')
2019-12-02 15:37:33 [info][yii\db\Command::query] SELECT * FROM `order` `order` WHERE `id`='3998'
2019-12-02 15:37:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`=53
2019-12-02 15:37:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`=53
2019-12-02 15:37:33 [info][yii\db\Command::query] SELECT * FROM `data_all` `dataAll` WHERE `name`='tdb'
2019-12-02 15:37:33 [info][yii\db\Command::execute] UPDATE `order` SET `sell_price`='5892.300', `sell_hand`=1, `sell_deposit`='2000.00', `profit`='1000', `order_state`=2, `updated_at`='2019-12-02 15:37:33', `updated_by`=0 WHERE `id`=3998
2019-12-02 15:37:33 [info][yii\db\Command::query] SELECT * FROM `user` `user` WHERE `id`=173327
2019-12-02 15:37:33 [info][yii\db\Command::query] SELECT * FROM `admin_user` `adminUser` WHERE `id`=37
2019-12-02 15:37:33 [info][yii\db\Command::query] SELECT * FROM `admin_user` `parent` WHERE `id`=20
2019-12-02 15:37:33 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `admin_leader`
2019-12-02 15:37:33 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'admin_leader' AND kcu.table_name = 'admin_leader'
2019-12-02 15:37:33 [info][yii\db\Command::query] SELECT * FROM `admin_leader` `adminLeader` WHERE `admin_id`=20
2019-12-02 15:37:33 [info][yii\db\Command::execute] UPDATE `admin_leader` SET `deposit`='-9096.32', `updated_at`='2019-12-02 15:37:33', `updated_by`=0 WHERE `admin_id`=20
2019-12-02 15:37:33 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `admin_deposit`
2019-12-02 15:37:33 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'admin_deposit' AND kcu.table_name = 'admin_deposit'
2019-12-02 15:37:33 [info][yii\db\Command::execute] INSERT INTO `admin_deposit` (`admin_id`, `order_id`, `amount`, `user_id`, `created_at`) VALUES (20, 3998, '1000', 173327, '2019-12-02 15:37:33')
2019-12-02 15:37:33 [info][yii\db\Command::execute] INSERT INTO `balance_account` (`order_id`, `user_id`, `balance`, `profit_account`) VALUES (3998, 173327, '2000', '1000')
2019-12-02 15:37:33 [info][yii\db\Command::query] SELECT
			            price,
			            time
			        FROM
			            data_a50
			        ORDER BY
			            id DESC
			        LIMIT 1
2019-12-02 15:37:33 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_a50`
2019-12-02 15:37:33 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_a50' AND kcu.table_name = 'data_a50'
2019-12-02 15:37:33 [info][yii\db\Command::execute] INSERT INTO `data_a50` (`price`, `time`) VALUES ('13600.500', '2019-12-02 15:37:33')
2019-12-02 15:37:33 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='13600.500', `open`='13582.500', `high`='13672.500', `low`='13582.500', `close`='13580.000', `diff`='20.5', `diff_rate`='', `time`='2019-12-02 15:37:33' WHERE `name`='a50'
2019-12-02 15:37:33 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2019-12-02 15:37:33 [info][yii\db\Command::query] SELECT * from `order` where (order_state = 1 )
2019-12-02 15:37:33 [info][yii\db\Command::query] SELECT
			            price,
			            time
			        FROM
			            data_hz
			        ORDER BY
			            id DESC
			        LIMIT 1
2019-12-02 15:37:33 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_hz`
2019-12-02 15:37:33 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_hz' AND kcu.table_name = 'data_hz'
2019-12-02 15:37:33 [info][yii\db\Command::execute] INSERT INTO `data_hz` (`price`, `time`) VALUES ('26472.500', '2019-12-02 15:37:33')
2019-12-02 15:37:33 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='26472.500', `open`='26373.000', `high`='26576.000', `low`='26337.000', `close`='26333.000', `diff`='139.5', `diff_rate`='', `time`='2019-12-02 15:37:33' WHERE `name`='hz'
2019-12-02 15:37:33 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2019-12-02 15:37:33 [info][yii\db\Command::query] SELECT * from `order` where (order_state = 1 )
2019-12-02 15:38:08 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2019-12-02 15:38:08 [trace][yii\base\Controller::runAction] Route to run: init/data
2019-12-02 15:38:08 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionData()
2019-12-02 15:38:34 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2019-12-02 15:38:34 [trace][yii\base\Controller::runAction] Route to run: init/data
2019-12-02 15:38:34 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionData()
2019-12-02 15:38:35 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id`, `risk` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2019-12-02 15:38:35 [info][yii\db\Connection::open] Opening DB connection: mysql:host=mysql;port=3306;dbname=weiqihuo
2019-12-02 15:38:35 [info][yii\db\Command::query] SELECT
			            price,
			            time
			        FROM
			            data_cl
			        ORDER BY
			            id DESC
			        LIMIT 1
2019-12-02 15:38:35 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2019-12-02 15:38:35 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_cl`
2019-12-02 15:38:35 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_cl' AND kcu.table_name = 'data_cl'
2019-12-02 15:38:35 [info][yii\db\Command::execute] INSERT INTO `data_cl` (`price`, `time`) VALUES ('55.970', '2019-12-02 15:38:35')
2019-12-02 15:38:35 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2019-12-02 15:38:35 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2019-12-02 15:38:35 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='55.970', `open`='55.470', `high`='56.240', `low`='55.420', `close`='55.170', `diff`='0.8', `diff_rate`='', `time`='2019-12-02 15:38:35' WHERE `name`='cl'
2019-12-02 15:38:35 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2019-12-02 15:38:35 [info][yii\db\Command::query] SELECT * from `order` where (order_state = 1 )
2019-12-02 15:38:35 [info][yii\db\Command::query] SELECT
			            price,
			            time
			        FROM
			            data_xau
			        ORDER BY
			            id DESC
			        LIMIT 1
2019-12-02 15:38:35 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2019-12-02 15:38:35 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2019-12-02 15:38:35 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('1465.730', '2019-12-02 15:38:35')
2019-12-02 15:38:35 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='1465.730', `open`='1470.300', `high`='1470.600', `low`='1464.200', `close`='1472.700', `diff`='-6.97', `diff_rate`='', `time`='2019-12-02 15:38:35' WHERE `name`='xau'
2019-12-02 15:38:35 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2019-12-02 15:38:35 [info][yii\db\Command::query] SELECT * from `order` where (order_state = 1 )
2019-12-02 15:38:36 [info][yii\db\Command::query] SELECT
			            price,
			            time
			        FROM
			            data_yb
			        ORDER BY
			            id DESC
			        LIMIT 1
2019-12-02 15:38:36 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_yb`
2019-12-02 15:38:36 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_yb' AND kcu.table_name = 'data_yb'
2019-12-02 15:38:36 [info][yii\db\Command::execute] INSERT INTO `data_yb` (`price`, `time`) VALUES ('211.29', '2019-12-02 15:38:36')
2019-12-02 15:38:36 [info][yii\db\Command::query] SELECT * FROM `data_all` `dataAll` WHERE `name`='yb'
2019-12-02 15:38:36 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='211.29', `open`='214.91', `high`='217.88', `low`='209.54', `close`='211.98', `diff`='-0.69', `diff_rate`='-0.33', `time`='2019-12-02 15:38:36' WHERE `name`='yb'
2019-12-02 15:38:36 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2019-12-02 15:38:36 [info][yii\db\Command::query] SELECT * from `order` where (order_state = 1 )
2019-12-02 15:38:36 [info][yii\web\Session::open] Session started
2019-12-02 15:38:36 [info][yii\db\Command::query] SELECT * FROM `data_all` `dataAll` WHERE `name`='btc'
2019-12-02 15:38:36 [info][yii\db\Command::query] SELECT price FROM data_btc WHERE time > "2019-12-02 00:00:00" ORDER BY price DESC LIMIT 1
2019-12-02 15:38:36 [info][yii\db\Command::query] SELECT price FROM data_btc WHERE time > "2019-12-02 00:00:00" ORDER BY price ASC LIMIT 1
2019-12-02 15:38:36 [info][yii\db\Command::query] SELECT
			            price,
			            time
			        FROM
			            data_btc
			        ORDER BY
			            id DESC
			        LIMIT 1
2019-12-02 15:38:36 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btc`
2019-12-02 15:38:36 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btc' AND kcu.table_name = 'data_btc'
2019-12-02 15:38:36 [info][yii\db\Command::execute] INSERT INTO `data_btc` (`price`, `time`) VALUES (21238.35, '2019-12-02 15:38:36')
2019-12-02 15:38:36 [info][yii\db\Command::query] SELECT * FROM `data_all` `dataAll` WHERE `name`='btc'
2019-12-02 15:38:36 [info][yii\db\Command::execute] UPDATE `data_all` SET `high`='21550.05', `low`='21206.35', `price`='21238.35', `time`='2019-12-02 15:38:36', `diff`='10963.86', `diff_rate`='106.71' WHERE `name`='btc'
2019-12-02 15:38:36 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2019-12-02 15:38:36 [info][yii\db\Command::query] SELECT * from `order` where (order_state = 1 )
2019-12-02 15:38:36 [info][yii\db\Command::query] SELECT
			            price,
			            time
			        FROM
			            data_tdb
			        ORDER BY
			            id DESC
			        LIMIT 1
2019-12-02 15:38:36 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_tdb`
2019-12-02 15:38:36 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_tdb' AND kcu.table_name = 'data_tdb'
2019-12-02 15:38:36 [info][yii\db\Command::execute] INSERT INTO `data_tdb` (`price`, `time`) VALUES ('5890.950', '2019-12-02 15:38:36')
2019-12-02 15:38:36 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='5890.950', `open`='5887.500', `high`='5908.500', `low`='5886.000', `close`='5864.000', `diff`='26.95', `diff_rate`='', `time`='2019-12-02 15:38:36' WHERE `name`='tdb'
2019-12-02 15:38:36 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2019-12-02 15:38:36 [info][yii\db\Command::query] SELECT * from `order` where (order_state = 1 )
2019-12-02 15:38:36 [info][yii\db\Command::query] SELECT
			            price,
			            time
			        FROM
			            data_a50
			        ORDER BY
			            id DESC
			        LIMIT 1
2019-12-02 15:38:36 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_a50`
2019-12-02 15:38:36 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_a50' AND kcu.table_name = 'data_a50'
2019-12-02 15:38:36 [info][yii\db\Command::execute] INSERT INTO `data_a50` (`price`, `time`) VALUES ('13598.250', '2019-12-02 15:38:36')
2019-12-02 15:38:36 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='13598.250', `open`='13582.500', `high`='13672.500', `low`='13582.500', `close`='13580.000', `diff`='18.25', `diff_rate`='', `time`='2019-12-02 15:38:36' WHERE `name`='a50'
2019-12-02 15:38:36 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2019-12-02 15:38:36 [info][yii\db\Command::query] SELECT * from `order` where (order_state = 1 )
2019-12-02 15:38:36 [info][yii\db\Command::query] SELECT
			            price,
			            time
			        FROM
			            data_hz
			        ORDER BY
			            id DESC
			        LIMIT 1
2019-12-02 15:38:36 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_hz`
2019-12-02 15:38:36 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_hz' AND kcu.table_name = 'data_hz'
2019-12-02 15:38:36 [info][yii\db\Command::execute] INSERT INTO `data_hz` (`price`, `time`) VALUES ('26440.500', '2019-12-02 15:38:36')
2019-12-02 15:38:36 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='26440.500', `open`='26373.000', `high`='26576.000', `low`='26337.000', `close`='26333.000', `diff`='107.5', `diff_rate`='', `time`='2019-12-02 15:38:36' WHERE `name`='hz'
2019-12-02 15:38:37 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2019-12-02 15:38:37 [info][yii\db\Command::query] SELECT * from `order` where (order_state = 1 )
2019-12-02 15:38:37 [info][yii\db\Command::query] SELECT * FROM `order` `order` WHERE `id`='3976'
2019-12-02 15:38:37 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `order`
2019-12-02 15:38:37 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'order' AND kcu.table_name = 'order'
2019-12-02 15:38:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`=52
2019-12-02 15:38:37 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2019-12-02 15:38:37 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2019-12-02 15:38:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`=52
2019-12-02 15:38:37 [info][yii\db\Command::query] SELECT * FROM `data_all` `dataAll` WHERE `name`='hz'
2019-12-02 15:38:37 [info][yii\db\Command::execute] UPDATE `order` SET `sell_price`='26440.500', `sell_hand`=5, `profit`='-5000', `order_state`=2, `updated_at`='2019-12-02 15:38:37', `updated_by`=0 WHERE `id`=3976
2019-12-02 15:38:37 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `user`
2019-12-02 15:38:37 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'user' AND kcu.table_name = 'user'
2019-12-02 15:38:37 [info][yii\db\Command::query] SELECT * FROM `user` `user` WHERE `id`=173620
2019-12-02 15:38:37 [info][yii\db\Command::query] SELECT * FROM `admin_user` `adminUser` WHERE `id`=35
2019-12-02 15:38:37 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `admin_user`
2019-12-02 15:38:37 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'admin_user' AND kcu.table_name = 'admin_user'
2019-12-02 15:38:37 [info][yii\db\Command::query] SELECT * FROM `admin_user` `parent` WHERE `id`=34
2019-12-02 15:38:37 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `admin_leader`
2019-12-02 15:38:37 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'admin_leader' AND kcu.table_name = 'admin_leader'
2019-12-02 15:38:37 [info][yii\db\Command::query] SELECT * FROM `admin_leader` `adminLeader` WHERE `admin_id`=34
2019-12-02 15:38:37 [info][yii\db\Command::execute] UPDATE `admin_leader` SET `deposit`='210049.25', `updated_at`='2019-12-02 15:38:37' WHERE `admin_id`=34
2019-12-02 15:38:37 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `admin_deposit`
2019-12-02 15:38:37 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'admin_deposit' AND kcu.table_name = 'admin_deposit'
2019-12-02 15:38:37 [info][yii\db\Command::execute] INSERT INTO `admin_deposit` (`admin_id`, `order_id`, `amount`, `user_id`, `created_at`) VALUES (34, 3976, '-5000', 173620, '2019-12-02 15:38:37')
2019-12-02 15:38:37 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `balance_account`
2019-12-02 15:38:37 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'balance_account' AND kcu.table_name = 'balance_account'
2019-12-02 15:38:37 [info][yii\db\Command::execute] INSERT INTO `balance_account` (`order_id`, `user_id`, `balance`, `loss_account`) VALUES (3976, 173620, '0', '-5000')
2019-12-02 15:38:37 [info][yii\db\Command::query] SELECT * FROM `order` `order` WHERE `id`='4002'
2019-12-02 15:38:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`=52
2019-12-02 15:38:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`=52
2019-12-02 15:38:37 [info][yii\db\Command::query] SELECT * FROM `data_all` `dataAll` WHERE `name`='hz'
2019-12-02 15:38:37 [info][yii\db\Command::execute] UPDATE `order` SET `sell_price`='26440.500', `sell_hand`=1, `profit`='-3000', `order_state`=2, `updated_at`='2019-12-02 15:38:37', `updated_by`=0 WHERE `id`=4002
2019-12-02 15:38:37 [info][yii\db\Command::query] SELECT * FROM `user` `user` WHERE `id`=173616
2019-12-02 15:38:37 [info][yii\db\Command::query] SELECT * FROM `admin_user` `adminUser` WHERE `id`=35
2019-12-02 15:38:37 [info][yii\db\Command::query] SELECT * FROM `admin_user` `parent` WHERE `id`=34
2019-12-02 15:38:37 [info][yii\db\Command::query] SELECT * FROM `admin_leader` `adminLeader` WHERE `admin_id`=34
2019-12-02 15:38:37 [info][yii\db\Command::execute] UPDATE `admin_leader` SET `deposit`='213049.25' WHERE `admin_id`=34
2019-12-02 15:38:37 [info][yii\db\Command::execute] INSERT INTO `admin_deposit` (`admin_id`, `order_id`, `amount`, `user_id`, `created_at`) VALUES (34, 4002, '-3000', 173616, '2019-12-02 15:38:37')
2019-12-02 15:38:37 [info][yii\db\Command::execute] INSERT INTO `balance_account` (`order_id`, `user_id`, `balance`, `loss_account`) VALUES (4002, 173616, '0', '-3000')
2019-12-02 15:38:37 [info][yii\db\Command::query] SELECT * FROM `order` `order` WHERE `id`='4007'
2019-12-02 15:38:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`=52
2019-12-02 15:38:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`=52
2019-12-02 15:38:37 [info][yii\db\Command::query] SELECT * FROM `data_all` `dataAll` WHERE `name`='hz'
2019-12-02 15:38:37 [info][yii\db\Command::execute] UPDATE `order` SET `sell_price`='26440.500', `sell_hand`=1, `sell_deposit`='1000.00', `profit`='500', `order_state`=2, `updated_at`='2019-12-02 15:38:37', `updated_by`=0 WHERE `id`=4007
2019-12-02 15:38:37 [info][yii\db\Command::query] SELECT * FROM `user` `user` WHERE `id`=173278
2019-12-02 15:38:37 [info][yii\db\Command::query] SELECT * FROM `admin_user` `adminUser` WHERE `id`=1
2019-12-02 15:38:37 [info][yii\db\Command::query] SELECT * FROM `admin_user` `parent` WHERE `id`=0
2019-12-02 15:38:37 [info][yii\db\Command::execute] INSERT INTO `balance_account` (`order_id`, `user_id`, `balance`, `profit_account`) VALUES (4007, 173278, '1000', '500')
2019-12-02 15:38:49 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2019-12-02 15:38:49 [trace][yii\base\Controller::runAction] Route to run: init/data
2019-12-02 15:38:49 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionData()
2019-12-02 15:38:49 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id`, `risk` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2019-12-02 15:38:49 [info][yii\db\Connection::open] Opening DB connection: mysql:host=mysql;port=3306;dbname=weiqihuo
2019-12-02 15:38:49 [info][yii\db\Command::query] SELECT
			            price,
			            time
			        FROM
			            data_cl
			        ORDER BY
			            id DESC
			        LIMIT 1
2019-12-02 15:38:49 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2019-12-02 15:38:49 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_cl`
2019-12-02 15:38:49 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_cl' AND kcu.table_name = 'data_cl'
2019-12-02 15:38:49 [info][yii\db\Command::execute] INSERT INTO `data_cl` (`price`, `time`) VALUES ('55.970', '2019-12-02 15:38:49')
2019-12-02 15:38:49 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2019-12-02 15:38:49 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2019-12-02 15:38:49 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='55.970', `open`='55.470', `high`='56.240', `low`='55.420', `close`='55.170', `diff`='0.8', `diff_rate`='', `time`='2019-12-02 15:38:49' WHERE `name`='cl'
2019-12-02 15:38:49 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2019-12-02 15:38:49 [info][yii\db\Command::query] SELECT * from `order` where (order_state = 1 )
2019-12-02 15:38:49 [info][yii\db\Command::query] SELECT
			            price,
			            time
			        FROM
			            data_xau
			        ORDER BY
			            id DESC
			        LIMIT 1
2019-12-02 15:38:49 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2019-12-02 15:38:49 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2019-12-02 15:38:49 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('1465.730', '2019-12-02 15:38:49')
2019-12-02 15:38:49 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='1465.730', `open`='1470.300', `high`='1470.600', `low`='1464.200', `close`='1472.700', `diff`='-6.97', `diff_rate`='', `time`='2019-12-02 15:38:49' WHERE `name`='xau'
2019-12-02 15:38:49 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2019-12-02 15:38:49 [info][yii\db\Command::query] SELECT * from `order` where (order_state = 1 )
2019-12-02 15:38:50 [info][yii\db\Command::query] SELECT
			            price,
			            time
			        FROM
			            data_yb
			        ORDER BY
			            id DESC
			        LIMIT 1
2019-12-02 15:38:50 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_yb`
2019-12-02 15:38:50 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_yb' AND kcu.table_name = 'data_yb'
2019-12-02 15:38:50 [info][yii\db\Command::execute] INSERT INTO `data_yb` (`price`, `time`) VALUES ('211.36', '2019-12-02 15:38:50')
2019-12-02 15:38:50 [info][yii\db\Command::query] SELECT * FROM `data_all` `dataAll` WHERE `name`='yb'
2019-12-02 15:38:50 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='211.36', `open`='214.91', `high`='217.88', `low`='209.54', `close`='211.98', `diff`='-0.61999999999998', `diff_rate`='-0.29', `time`='2019-12-02 15:38:50' WHERE `name`='yb'
2019-12-02 15:38:50 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2019-12-02 15:38:50 [info][yii\db\Command::query] SELECT * from `order` where (order_state = 1 )
2019-12-02 15:38:50 [info][yii\web\Session::open] Session started
2019-12-02 15:38:50 [info][yii\db\Command::query] SELECT * FROM `data_all` `dataAll` WHERE `name`='btc'
2019-12-02 15:38:50 [info][yii\db\Command::query] SELECT price FROM data_btc WHERE time > "2019-12-02 00:00:00" ORDER BY price DESC LIMIT 1
2019-12-02 15:38:51 [info][yii\db\Command::query] SELECT price FROM data_btc WHERE time > "2019-12-02 00:00:00" ORDER BY price ASC LIMIT 1
2019-12-02 15:38:51 [info][yii\db\Command::query] SELECT
			            price,
			            time
			        FROM
			            data_btc
			        ORDER BY
			            id DESC
			        LIMIT 1
2019-12-02 15:38:51 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btc`
2019-12-02 15:38:51 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btc' AND kcu.table_name = 'data_btc'
2019-12-02 15:38:51 [info][yii\db\Command::execute] INSERT INTO `data_btc` (`price`, `time`) VALUES (21242.35, '2019-12-02 15:38:51')
2019-12-02 15:38:51 [info][yii\db\Command::query] SELECT * FROM `data_all` `dataAll` WHERE `name`='btc'
2019-12-02 15:38:51 [info][yii\db\Command::execute] UPDATE `data_all` SET `high`='21550.05', `low`='21206.35', `price`='21242.35', `time`='2019-12-02 15:38:51', `diff`='10967.86', `diff_rate`='106.75' WHERE `name`='btc'
2019-12-02 15:38:51 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2019-12-02 15:38:51 [info][yii\db\Command::query] SELECT * from `order` where (order_state = 1 )
2019-12-02 15:38:51 [info][yii\db\Command::query] SELECT
			            price,
			            time
			        FROM
			            data_tdb
			        ORDER BY
			            id DESC
			        LIMIT 1
2019-12-02 15:38:51 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_tdb`
2019-12-02 15:38:51 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_tdb' AND kcu.table_name = 'data_tdb'
2019-12-02 15:38:51 [info][yii\db\Command::execute] INSERT INTO `data_tdb` (`price`, `time`) VALUES ('5891.850', '2019-12-02 15:38:51')
2019-12-02 15:38:51 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='5891.850', `open`='5886.000', `high`='5908.500', `low`='5886.000', `close`='5864.000', `diff`='27.85', `diff_rate`='', `time`='2019-12-02 15:38:51' WHERE `name`='tdb'
2019-12-02 15:38:51 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2019-12-02 15:38:51 [info][yii\db\Command::query] SELECT * from `order` where (order_state = 1 )
2019-12-02 15:38:51 [info][yii\db\Command::query] SELECT
			            price,
			            time
			        FROM
			            data_a50
			        ORDER BY
			            id DESC
			        LIMIT 1
2019-12-02 15:38:51 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_a50`
2019-12-02 15:38:51 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_a50' AND kcu.table_name = 'data_a50'
2019-12-02 15:38:51 [info][yii\db\Command::execute] INSERT INTO `data_a50` (`price`, `time`) VALUES ('13596.000', '2019-12-02 15:38:51')
2019-12-02 15:38:51 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='13596.000', `open`='13582.500', `high`='13672.500', `low`='13582.500', `close`='13580.000', `diff`='16', `diff_rate`='', `time`='2019-12-02 15:38:51' WHERE `name`='a50'
2019-12-02 15:38:51 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2019-12-02 15:38:51 [info][yii\db\Command::query] SELECT * from `order` where (order_state = 1 )
2019-12-02 15:38:51 [info][yii\db\Command::query] SELECT
			            price,
			            time
			        FROM
			            data_hz
			        ORDER BY
			            id DESC
			        LIMIT 1
2019-12-02 15:38:51 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_hz`
2019-12-02 15:38:51 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_hz' AND kcu.table_name = 'data_hz'
2019-12-02 15:38:51 [info][yii\db\Command::execute] INSERT INTO `data_hz` (`price`, `time`) VALUES ('26441.400', '2019-12-02 15:38:51')
2019-12-02 15:38:51 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='26441.400', `open`='26373.000', `high`='26576.000', `low`='26337.000', `close`='26333.000', `diff`='108.4', `diff_rate`='', `time`='2019-12-02 15:38:51' WHERE `name`='hz'
2019-12-02 15:38:51 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2019-12-02 15:38:51 [info][yii\db\Command::query] SELECT * from `order` where (order_state = 1 )
2019-12-02 15:38:55 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2019-12-02 15:38:55 [trace][yii\base\Controller::runAction] Route to run: init/data
2019-12-02 15:38:55 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionData()
2019-12-02 15:38:55 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id`, `risk` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2019-12-02 15:38:55 [info][yii\db\Connection::open] Opening DB connection: mysql:host=mysql;port=3306;dbname=weiqihuo
2019-12-02 15:38:55 [info][yii\db\Command::query] SELECT
			            price,
			            time
			        FROM
			            data_cl
			        ORDER BY
			            id DESC
			        LIMIT 1
2019-12-02 15:38:55 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2019-12-02 15:38:55 [info][yii\db\Command::query] SELECT * from `order` where (order_state = 1 )
2019-12-02 15:38:55 [info][yii\db\Command::query] SELECT
			            price,
			            time
			        FROM
			            data_xau
			        ORDER BY
			            id DESC
			        LIMIT 1
2019-12-02 15:38:55 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2019-12-02 15:38:55 [info][yii\db\Command::query] SELECT * from `order` where (order_state = 1 )
2019-12-02 15:38:56 [info][yii\db\Command::query] SELECT
			            price,
			            time
			        FROM
			            data_yb
			        ORDER BY
			            id DESC
			        LIMIT 1
2019-12-02 15:38:56 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2019-12-02 15:38:56 [info][yii\db\Command::query] SELECT * from `order` where (order_state = 1 )
2019-12-02 15:38:56 [info][yii\web\Session::open] Session started
2019-12-02 15:38:56 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2019-12-02 15:38:56 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2019-12-02 15:38:56 [info][yii\db\Command::query] SELECT * FROM `data_all` `dataAll` WHERE `name`='btc'
2019-12-02 15:38:56 [info][yii\db\Command::query] SELECT price FROM data_btc WHERE time > "2019-12-02 00:00:00" ORDER BY price DESC LIMIT 1
2019-12-02 15:38:57 [info][yii\db\Command::query] SELECT price FROM data_btc WHERE time > "2019-12-02 00:00:00" ORDER BY price ASC LIMIT 1
2019-12-02 15:38:57 [info][yii\db\Command::query] SELECT
			            price,
			            time
			        FROM
			            data_btc
			        ORDER BY
			            id DESC
			        LIMIT 1
2019-12-02 15:38:57 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2019-12-02 15:38:57 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btc`
2019-12-02 15:38:57 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btc' AND kcu.table_name = 'data_btc'
2019-12-02 15:38:57 [info][yii\db\Command::execute] INSERT INTO `data_btc` (`price`, `time`) VALUES (21238.35, '2019-12-02 15:38:57')
2019-12-02 15:38:57 [info][yii\db\Command::query] SELECT * FROM `data_all` `dataAll` WHERE `name`='btc'
2019-12-02 15:38:57 [info][yii\db\Command::execute] UPDATE `data_all` SET `high`='21550.05', `low`='21206.35', `price`='21238.35', `time`='2019-12-02 15:38:57', `diff`='10963.86', `diff_rate`='106.71' WHERE `name`='btc'
2019-12-02 15:38:57 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2019-12-02 15:38:57 [info][yii\db\Command::query] SELECT * from `order` where (order_state = 1 )
2019-12-02 15:38:57 [info][yii\db\Command::query] SELECT
			            price,
			            time
			        FROM
			            data_tdb
			        ORDER BY
			            id DESC
			        LIMIT 1
2019-12-02 15:38:57 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2019-12-02 15:38:57 [info][yii\db\Command::query] SELECT * from `order` where (order_state = 1 )
2019-12-02 15:38:57 [info][yii\db\Command::query] SELECT
			            price,
			            time
			        FROM
			            data_a50
			        ORDER BY
			            id DESC
			        LIMIT 1
2019-12-02 15:38:57 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2019-12-02 15:38:57 [info][yii\db\Command::query] SELECT * from `order` where (order_state = 1 )
2019-12-02 15:38:57 [info][yii\db\Command::query] SELECT
			            price,
			            time
			        FROM
			            data_hz
			        ORDER BY
			            id DESC
			        LIMIT 1
2019-12-02 15:38:57 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_hz`
2019-12-02 15:38:57 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_hz' AND kcu.table_name = 'data_hz'
2019-12-02 15:38:57 [info][yii\db\Command::execute] INSERT INTO `data_hz` (`price`, `time`) VALUES ('26444.100', '2019-12-02 15:38:57')
2019-12-02 15:38:57 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='26444.100', `open`='26373.000', `high`='26576.000', `low`='26337.000', `close`='26333.000', `diff`='111.1', `diff_rate`='', `time`='2019-12-02 15:38:57' WHERE `name`='hz'
2019-12-02 15:38:57 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2019-12-02 15:38:57 [info][yii\db\Command::query] SELECT * from `order` where (order_state = 1 )
2019-12-02 15:39:16 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2019-12-02 15:39:16 [trace][yii\base\Controller::runAction] Route to run: init/data
2019-12-02 15:39:16 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionData()
2019-12-02 15:39:16 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id`, `risk` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2019-12-02 15:39:16 [info][yii\db\Connection::open] Opening DB connection: mysql:host=mysql;port=3306;dbname=weiqihuo
2019-12-02 15:39:16 [info][yii\db\Command::query] SELECT
			            price,
			            time
			        FROM
			            data_cl
			        ORDER BY
			            id DESC
			        LIMIT 1
2019-12-02 15:39:16 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2019-12-02 15:39:16 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_cl`
2019-12-02 15:39:16 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_cl' AND kcu.table_name = 'data_cl'
2019-12-02 15:39:16 [info][yii\db\Command::execute] INSERT INTO `data_cl` (`price`, `time`) VALUES ('55.979', '2019-12-02 15:39:16')
2019-12-02 15:39:16 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2019-12-02 15:39:16 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2019-12-02 15:39:16 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='55.979', `open`='55.470', `high`='56.240', `low`='55.420', `close`='55.170', `diff`='0.809', `diff_rate`='', `time`='2019-12-02 15:39:16' WHERE `name`='cl'
2019-12-02 15:39:17 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2019-12-02 15:39:17 [info][yii\db\Command::query] SELECT * from `order` where (order_state = 1 )
2019-12-02 15:39:17 [info][yii\db\Command::query] SELECT
			            price,
			            time
			        FROM
			            data_xau
			        ORDER BY
			            id DESC
			        LIMIT 1
2019-12-02 15:39:17 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2019-12-02 15:39:17 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2019-12-02 15:39:17 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('1465.550', '2019-12-02 15:39:17')
2019-12-02 15:39:17 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='1465.550', `open`='1470.300', `high`='1470.600', `low`='1464.200', `close`='1472.700', `diff`='-7.1500000000001', `diff_rate`='', `time`='2019-12-02 15:39:17' WHERE `name`='xau'
2019-12-02 15:39:17 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2019-12-02 15:39:17 [info][yii\db\Command::query] SELECT * from `order` where (order_state = 1 )
2019-12-02 15:39:18 [info][yii\db\Command::query] SELECT
			            price,
			            time
			        FROM
			            data_yb
			        ORDER BY
			            id DESC
			        LIMIT 1
2019-12-02 15:39:18 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_yb`
2019-12-02 15:39:18 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_yb' AND kcu.table_name = 'data_yb'
2019-12-02 15:39:18 [info][yii\db\Command::execute] INSERT INTO `data_yb` (`price`, `time`) VALUES ('211.48', '2019-12-02 15:39:18')
2019-12-02 15:39:18 [info][yii\db\Command::query] SELECT * FROM `data_all` `dataAll` WHERE `name`='yb'
2019-12-02 15:39:18 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='211.48', `open`='214.91', `high`='217.88', `low`='209.54', `close`='211.98', `diff`='-0.5', `diff_rate`='-0.24', `time`='2019-12-02 15:39:18' WHERE `name`='yb'
2019-12-02 15:39:18 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2019-12-02 15:39:18 [info][yii\db\Command::query] SELECT * from `order` where (order_state = 1 )
2019-12-02 15:39:18 [info][yii\web\Session::open] Session started
2019-12-02 15:39:18 [info][yii\db\Command::query] SELECT * FROM `data_all` `dataAll` WHERE `name`='btc'
2019-12-02 15:39:18 [info][yii\db\Command::query] SELECT price FROM data_btc WHERE time > "2019-12-02 00:00:00" ORDER BY price DESC LIMIT 1
2019-12-02 15:39:18 [info][yii\db\Command::query] SELECT price FROM data_btc WHERE time > "2019-12-02 00:00:00" ORDER BY price ASC LIMIT 1
2019-12-02 15:39:18 [info][yii\db\Command::query] SELECT
			            price,
			            time
			        FROM
			            data_btc
			        ORDER BY
			            id DESC
			        LIMIT 1
2019-12-02 15:39:18 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btc`
2019-12-02 15:39:18 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btc' AND kcu.table_name = 'data_btc'
2019-12-02 15:39:18 [info][yii\db\Command::execute] INSERT INTO `data_btc` (`price`, `time`) VALUES (21235.35, '2019-12-02 15:39:18')
2019-12-02 15:39:18 [info][yii\db\Command::query] SELECT * FROM `data_all` `dataAll` WHERE `name`='btc'
2019-12-02 15:39:18 [info][yii\db\Command::execute] UPDATE `data_all` SET `high`='21550.05', `low`='21206.35', `price`='21235.35', `time`='2019-12-02 15:39:18', `diff`='10960.86', `diff_rate`='106.68' WHERE `name`='btc'
2019-12-02 15:39:18 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2019-12-02 15:39:18 [info][yii\db\Command::query] SELECT * from `order` where (order_state = 1 )
2019-12-02 15:39:18 [info][yii\db\Command::query] SELECT
			            price,
			            time
			        FROM
			            data_tdb
			        ORDER BY
			            id DESC
			        LIMIT 1
2019-12-02 15:39:18 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_tdb`
2019-12-02 15:39:18 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_tdb' AND kcu.table_name = 'data_tdb'
2019-12-02 15:39:18 [info][yii\db\Command::execute] INSERT INTO `data_tdb` (`price`, `time`) VALUES ('5891.400', '2019-12-02 15:39:18')
2019-12-02 15:39:18 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='5891.400', `open`='5886.000', `high`='5908.500', `low`='5886.000', `close`='5864.000', `diff`='27.4', `diff_rate`='', `time`='2019-12-02 15:39:18' WHERE `name`='tdb'
2019-12-02 15:39:18 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2019-12-02 15:39:18 [info][yii\db\Command::query] SELECT * from `order` where (order_state = 1 )
2019-12-02 15:39:18 [info][yii\db\Command::query] SELECT
			            price,
			            time
			        FROM
			            data_a50
			        ORDER BY
			            id DESC
			        LIMIT 1
2019-12-02 15:39:18 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_a50`
2019-12-02 15:39:18 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_a50' AND kcu.table_name = 'data_a50'
2019-12-02 15:39:18 [info][yii\db\Command::execute] INSERT INTO `data_a50` (`price`, `time`) VALUES ('13596.000', '2019-12-02 15:39:18')
2019-12-02 15:39:18 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='13596.000', `open`='13582.500', `high`='13672.500', `low`='13582.500', `close`='13580.000', `diff`='16', `diff_rate`='', `time`='2019-12-02 15:39:18' WHERE `name`='a50'
2019-12-02 15:39:18 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2019-12-02 15:39:18 [info][yii\db\Command::query] SELECT * from `order` where (order_state = 1 )
2019-12-02 15:39:18 [info][yii\db\Command::query] SELECT
			            price,
			            time
			        FROM
			            data_hz
			        ORDER BY
			            id DESC
			        LIMIT 1
2019-12-02 15:39:18 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_hz`
2019-12-02 15:39:18 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_hz' AND kcu.table_name = 'data_hz'
2019-12-02 15:39:18 [info][yii\db\Command::execute] INSERT INTO `data_hz` (`price`, `time`) VALUES ('26470.700', '2019-12-02 15:39:18')
2019-12-02 15:39:18 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='26470.700', `open`='26373.000', `high`='26576.000', `low`='26337.000', `close`='26333.000', `diff`='137.7', `diff_rate`='', `time`='2019-12-02 15:39:18' WHERE `name`='hz'
2019-12-02 15:39:18 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2019-12-02 15:39:18 [info][yii\db\Command::query] SELECT * from `order` where (order_state = 1 )
2019-12-02 15:39:34 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2019-12-02 15:39:34 [trace][yii\base\Controller::runAction] Route to run: init/data
2019-12-02 15:39:34 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionData()
2019-12-02 15:39:34 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id`, `risk` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2019-12-02 15:39:34 [info][yii\db\Connection::open] Opening DB connection: mysql:host=mysql;port=3306;dbname=weiqihuo
2019-12-02 15:39:34 [info][yii\db\Command::query] SELECT
			            price,
			            time
			        FROM
			            data_cl
			        ORDER BY
			            id DESC
			        LIMIT 1
2019-12-02 15:39:34 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2019-12-02 15:39:34 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_cl`
2019-12-02 15:39:34 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_cl' AND kcu.table_name = 'data_cl'
2019-12-02 15:39:34 [info][yii\db\Command::execute] INSERT INTO `data_cl` (`price`, `time`) VALUES ('55.979', '2019-12-02 15:39:34')
2019-12-02 15:39:34 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2019-12-02 15:39:34 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2019-12-02 15:39:34 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='55.979', `open`='55.470', `high`='56.240', `low`='55.420', `close`='55.170', `diff`='0.809', `diff_rate`='', `time`='2019-12-02 15:39:34' WHERE `name`='cl'
2019-12-02 15:39:34 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2019-12-02 15:39:34 [info][yii\db\Command::query] SELECT * from `order` where (order_state = 1 )
2019-12-02 15:39:34 [info][yii\db\Command::query] SELECT
			            price,
			            time
			        FROM
			            data_xau
			        ORDER BY
			            id DESC
			        LIMIT 1
2019-12-02 15:39:34 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2019-12-02 15:39:34 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2019-12-02 15:39:34 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('1465.550', '2019-12-02 15:39:34')
2019-12-02 15:39:34 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='1465.550', `open`='1470.300', `high`='1470.600', `low`='1464.200', `close`='1472.700', `diff`='-7.1500000000001', `diff_rate`='', `time`='2019-12-02 15:39:34' WHERE `name`='xau'
2019-12-02 15:39:34 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2019-12-02 15:39:34 [info][yii\db\Command::query] SELECT * from `order` where (order_state = 1 )
2019-12-02 15:39:35 [info][yii\db\Command::query] SELECT
			            price,
			            time
			        FROM
			            data_yb
			        ORDER BY
			            id DESC
			        LIMIT 1
2019-12-02 15:39:35 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_yb`
2019-12-02 15:39:35 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_yb' AND kcu.table_name = 'data_yb'
2019-12-02 15:39:35 [info][yii\db\Command::execute] INSERT INTO `data_yb` (`price`, `time`) VALUES ('211.46', '2019-12-02 15:39:35')
2019-12-02 15:39:35 [info][yii\db\Command::query] SELECT * FROM `data_all` `dataAll` WHERE `name`='yb'
2019-12-02 15:39:35 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='211.46', `open`='214.91', `high`='217.88', `low`='209.54', `close`='211.98', `diff`='-0.51999999999998', `diff_rate`='-0.25', `time`='2019-12-02 15:39:35' WHERE `name`='yb'
2019-12-02 15:39:35 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2019-12-02 15:39:35 [info][yii\db\Command::query] SELECT * from `order` where (order_state = 1 )
2019-12-02 15:39:35 [info][yii\web\Session::open] Session started
2019-12-02 15:39:35 [info][yii\db\Command::query] SELECT * FROM `data_all` `dataAll` WHERE `name`='btc'
2019-12-02 15:39:35 [info][yii\db\Command::query] SELECT price FROM data_btc WHERE time > "2019-12-02 00:00:00" ORDER BY price DESC LIMIT 1
2019-12-02 15:39:35 [info][yii\db\Command::query] SELECT price FROM data_btc WHERE time > "2019-12-02 00:00:00" ORDER BY price ASC LIMIT 1
2019-12-02 15:39:35 [info][yii\db\Command::query] SELECT
			            price,
			            time
			        FROM
			            data_btc
			        ORDER BY
			            id DESC
			        LIMIT 1
2019-12-02 15:39:35 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btc`
2019-12-02 15:39:35 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btc' AND kcu.table_name = 'data_btc'
2019-12-02 15:39:35 [info][yii\db\Command::execute] INSERT INTO `data_btc` (`price`, `time`) VALUES (21232.35, '2019-12-02 15:39:35')
2019-12-02 15:39:35 [info][yii\db\Command::query] SELECT * FROM `data_all` `dataAll` WHERE `name`='btc'
2019-12-02 15:39:35 [info][yii\db\Command::execute] UPDATE `data_all` SET `high`='21550.05', `low`='21206.35', `price`='21232.35', `time`='2019-12-02 15:39:35', `diff`='10957.86', `diff_rate`='106.65' WHERE `name`='btc'
2019-12-02 15:39:35 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2019-12-02 15:39:35 [info][yii\db\Command::query] SELECT * from `order` where (order_state = 1 )
2019-12-02 15:39:36 [info][yii\db\Command::query] SELECT
			            price,
			            time
			        FROM
			            data_tdb
			        ORDER BY
			            id DESC
			        LIMIT 1
2019-12-02 15:39:36 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_tdb`
2019-12-02 15:39:36 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_tdb' AND kcu.table_name = 'data_tdb'
2019-12-02 15:39:36 [info][yii\db\Command::execute] INSERT INTO `data_tdb` (`price`, `time`) VALUES ('5891.400', '2019-12-02 15:39:36')
2019-12-02 15:39:36 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='5891.400', `open`='5887.500', `high`='5908.500', `low`='5886.000', `close`='5864.000', `diff`='27.4', `diff_rate`='', `time`='2019-12-02 15:39:36' WHERE `name`='tdb'
2019-12-02 15:39:36 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2019-12-02 15:39:36 [info][yii\db\Command::query] SELECT * from `order` where (order_state = 1 )
2019-12-02 15:39:36 [info][yii\db\Command::query] SELECT
			            price,
			            time
			        FROM
			            data_a50
			        ORDER BY
			            id DESC
			        LIMIT 1
2019-12-02 15:39:36 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_a50`
2019-12-02 15:39:36 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_a50' AND kcu.table_name = 'data_a50'
2019-12-02 15:39:36 [info][yii\db\Command::execute] INSERT INTO `data_a50` (`price`, `time`) VALUES ('13598.250', '2019-12-02 15:39:36')
2019-12-02 15:39:36 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='13598.250', `open`='13582.500', `high`='13672.500', `low`='13582.500', `close`='13580.000', `diff`='18.25', `diff_rate`='', `time`='2019-12-02 15:39:36' WHERE `name`='a50'
2019-12-02 15:39:36 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2019-12-02 15:39:36 [info][yii\db\Command::query] SELECT * from `order` where (order_state = 1 )
2019-12-02 15:39:36 [info][yii\db\Command::query] SELECT
			            price,
			            time
			        FROM
			            data_hz
			        ORDER BY
			            id DESC
			        LIMIT 1
2019-12-02 15:39:36 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_hz`
2019-12-02 15:39:36 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_hz' AND kcu.table_name = 'data_hz'
2019-12-02 15:39:36 [info][yii\db\Command::execute] INSERT INTO `data_hz` (`price`, `time`) VALUES ('26468.900', '2019-12-02 15:39:36')
2019-12-02 15:39:36 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='26468.900', `open`='26373.000', `high`='26576.000', `low`='26337.000', `close`='26333.000', `diff`='135.9', `diff_rate`='', `time`='2019-12-02 15:39:36' WHERE `name`='hz'
2019-12-02 15:39:36 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2019-12-02 15:39:36 [info][yii\db\Command::query] SELECT * from `order` where (order_state = 1 )
2019-12-02 15:41:13 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2019-12-02 15:41:13 [trace][yii\base\Controller::runAction] Route to run: init/data
2019-12-02 15:41:13 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionData()
2019-12-02 15:41:13 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id`, `risk` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2019-12-02 15:41:13 [info][yii\db\Connection::open] Opening DB connection: mysql:host=mysql;port=3306;dbname=weiqihuo
2019-12-02 15:41:13 [info][yii\db\Command::query] SELECT
			            price,
			            time
			        FROM
			            data_cl
			        ORDER BY
			            id DESC
			        LIMIT 1
2019-12-02 15:41:13 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2019-12-02 15:41:13 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_cl`
2019-12-02 15:41:13 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_cl' AND kcu.table_name = 'data_cl'
2019-12-02 15:41:13 [info][yii\db\Command::execute] INSERT INTO `data_cl` (`price`, `time`) VALUES ('55.997', '2019-12-02 15:41:13')
2019-12-02 15:41:13 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2019-12-02 15:41:13 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2019-12-02 15:41:13 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='55.997', `open`='55.470', `high`='56.240', `low`='55.420', `close`='55.170', `diff`='0.827', `diff_rate`='', `time`='2019-12-02 15:41:13' WHERE `name`='cl'
2019-12-02 15:41:13 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2019-12-02 15:41:13 [info][yii\db\Command::query] SELECT * from `order` where (order_state = 1 )
2019-12-02 15:41:13 [info][yii\db\Command::query] SELECT
			            price,
			            time
			        FROM
			            data_xau
			        ORDER BY
			            id DESC
			        LIMIT 1
2019-12-02 15:41:13 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2019-12-02 15:41:13 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2019-12-02 15:41:13 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('1465.190', '2019-12-02 15:41:13')
2019-12-02 15:41:13 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='1465.190', `open`='1470.300', `high`='1470.600', `low`='1464.200', `close`='1472.700', `diff`='-7.51', `diff_rate`='', `time`='2019-12-02 15:41:13' WHERE `name`='xau'
2019-12-02 15:41:13 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2019-12-02 15:41:13 [info][yii\db\Command::query] SELECT * from `order` where (order_state = 1 )
2019-12-02 15:41:14 [info][yii\db\Command::query] SELECT
			            price,
			            time
			        FROM
			            data_yb
			        ORDER BY
			            id DESC
			        LIMIT 1
2019-12-02 15:41:14 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_yb`
2019-12-02 15:41:14 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_yb' AND kcu.table_name = 'data_yb'
2019-12-02 15:41:14 [info][yii\db\Command::execute] INSERT INTO `data_yb` (`price`, `time`) VALUES ('211.45', '2019-12-02 15:41:14')
2019-12-02 15:41:14 [info][yii\db\Command::query] SELECT * FROM `data_all` `dataAll` WHERE `name`='yb'
2019-12-02 15:41:14 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='211.45', `open`='214.91', `high`='217.88', `low`='209.54', `close`='211.98', `diff`='-0.53', `diff_rate`='-0.25', `time`='2019-12-02 15:41:14' WHERE `name`='yb'
2019-12-02 15:41:14 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2019-12-02 15:41:14 [info][yii\db\Command::query] SELECT * from `order` where (order_state = 1 )
2019-12-02 15:41:14 [info][yii\web\Session::open] Session started
2019-12-02 15:41:14 [info][yii\db\Command::query] SELECT * FROM `data_all` `dataAll` WHERE `name`='btc'
2019-12-02 15:41:14 [info][yii\db\Command::query] SELECT price FROM data_btc WHERE time > "2019-12-02 00:00:00" ORDER BY price DESC LIMIT 1
2019-12-02 15:41:14 [info][yii\db\Command::query] SELECT price FROM data_btc WHERE time > "2019-12-02 00:00:00" ORDER BY price ASC LIMIT 1
2019-12-02 15:41:15 [info][yii\db\Command::query] SELECT
			            price,
			            time
			        FROM
			            data_btc
			        ORDER BY
			            id DESC
			        LIMIT 1
2019-12-02 15:41:15 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btc`
2019-12-02 15:41:15 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btc' AND kcu.table_name = 'data_btc'
2019-12-02 15:41:15 [info][yii\db\Command::execute] INSERT INTO `data_btc` (`price`, `time`) VALUES (21229.35, '2019-12-02 15:41:15')
2019-12-02 15:41:15 [info][yii\db\Command::query] SELECT * FROM `data_all` `dataAll` WHERE `name`='btc'
2019-12-02 15:41:15 [info][yii\db\Command::execute] UPDATE `data_all` SET `high`='21550.05', `low`='21206.35', `price`='21229.35', `time`='2019-12-02 15:41:15', `diff`='10954.86', `diff_rate`='106.62' WHERE `name`='btc'
2019-12-02 15:41:15 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2019-12-02 15:41:15 [info][yii\db\Command::query] SELECT * from `order` where (order_state = 1 )
2019-12-02 15:41:15 [info][yii\db\Command::query] SELECT
			            price,
			            time
			        FROM
			            data_tdb
			        ORDER BY
			            id DESC
			        LIMIT 1
2019-12-02 15:41:15 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_tdb`
2019-12-02 15:41:15 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_tdb' AND kcu.table_name = 'data_tdb'
2019-12-02 15:41:15 [info][yii\db\Command::execute] INSERT INTO `data_tdb` (`price`, `time`) VALUES ('5890.500', '2019-12-02 15:41:15')
2019-12-02 15:41:15 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='5890.500', `open`='5886.000', `high`='5908.500', `low`='5886.000', `close`='5864.000', `diff`='26.5', `diff_rate`='', `time`='2019-12-02 15:41:15' WHERE `name`='tdb'
2019-12-02 15:41:15 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2019-12-02 15:41:15 [info][yii\db\Command::query] SELECT * from `order` where (order_state = 1 )
2019-12-02 15:41:15 [info][yii\db\Command::query] SELECT
			            price,
			            time
			        FROM
			            data_a50
			        ORDER BY
			            id DESC
			        LIMIT 1
2019-12-02 15:41:15 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_a50`
2019-12-02 15:41:15 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_a50' AND kcu.table_name = 'data_a50'
2019-12-02 15:41:15 [info][yii\db\Command::execute] INSERT INTO `data_a50` (`price`, `time`) VALUES ('13602.750', '2019-12-02 15:41:15')
2019-12-02 15:41:15 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='13602.750', `open`='13582.500', `high`='13672.500', `low`='13582.500', `close`='13580.000', `diff`='22.75', `diff_rate`='', `time`='2019-12-02 15:41:15' WHERE `name`='a50'
2019-12-02 15:41:15 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2019-12-02 15:41:15 [info][yii\db\Command::query] SELECT * from `order` where (order_state = 1 )
2019-12-02 15:41:15 [info][yii\db\Command::query] SELECT
			            price,
			            time
			        FROM
			            data_hz
			        ORDER BY
			            id DESC
			        LIMIT 1
2019-12-02 15:41:15 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_hz`
2019-12-02 15:41:15 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_hz' AND kcu.table_name = 'data_hz'
2019-12-02 15:41:15 [info][yii\db\Command::execute] INSERT INTO `data_hz` (`price`, `time`) VALUES ('26476.100', '2019-12-02 15:41:15')
2019-12-02 15:41:15 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='26476.100', `open`='26373.000', `high`='26576.000', `low`='26337.000', `close`='26333.000', `diff`='143.1', `diff_rate`='', `time`='2019-12-02 15:41:15' WHERE `name`='hz'
2019-12-02 15:41:15 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2019-12-02 15:41:15 [info][yii\db\Command::query] SELECT * from `order` where (order_state = 1 )
2019-12-02 15:46:03 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2019-12-02 15:46:03 [trace][yii\base\Controller::runAction] Route to run: init/data
2019-12-02 15:46:03 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionData()
2019-12-02 15:46:56 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2019-12-02 15:46:56 [trace][yii\base\Controller::runAction] Route to run: init/data
2019-12-02 15:46:56 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionData()
2019-12-02 15:46:56 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id`, `risk` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2019-12-02 15:46:56 [info][yii\db\Connection::open] Opening DB connection: mysql:host=mysql;port=3306;dbname=weiqihuo
2019-12-02 15:46:56 [info][yii\db\Command::query] SELECT
			            price,
			            time
			        FROM
			            data_cl
			        ORDER BY
			            id DESC
			        LIMIT 1
2019-12-02 15:46:56 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2019-12-02 15:46:56 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_cl`
2019-12-02 15:46:56 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_cl' AND kcu.table_name = 'data_cl'
2019-12-02 15:46:56 [info][yii\db\Command::execute] INSERT INTO `data_cl` (`price`, `time`) VALUES ('56.015', '2019-12-02 15:46:56')
2019-12-02 15:46:56 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2019-12-02 15:46:56 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2019-12-02 15:46:56 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='56.015', `open`='55.470', `high`='56.240', `low`='55.420', `close`='55.170', `diff`='0.845', `diff_rate`='', `time`='2019-12-02 15:46:56' WHERE `name`='cl'
2019-12-02 15:46:56 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2019-12-02 15:46:56 [info][yii\db\Command::query] SELECT * from `order` where (order_state = 1 )
2019-12-02 15:46:56 [info][yii\db\Command::query] SELECT
			            price,
			            time
			        FROM
			            data_xau
			        ORDER BY
			            id DESC
			        LIMIT 1
2019-12-02 15:46:56 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2019-12-02 15:46:56 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2019-12-02 15:46:56 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('1464.740', '2019-12-02 15:46:56')
2019-12-02 15:46:56 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='1464.740', `open`='1470.300', `high`='1470.600', `low`='1464.200', `close`='1472.700', `diff`='-7.96', `diff_rate`='', `time`='2019-12-02 15:46:56' WHERE `name`='xau'
2019-12-02 15:46:56 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2019-12-02 15:46:56 [info][yii\db\Command::query] SELECT * from `order` where (order_state = 1 )
2019-12-02 15:46:57 [info][yii\db\Command::query] SELECT
			            price,
			            time
			        FROM
			            data_yb
			        ORDER BY
			            id DESC
			        LIMIT 1
2019-12-02 15:46:57 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_yb`
2019-12-02 15:46:57 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_yb' AND kcu.table_name = 'data_yb'
2019-12-02 15:46:57 [info][yii\db\Command::execute] INSERT INTO `data_yb` (`price`, `time`) VALUES ('211.67', '2019-12-02 15:46:57')
2019-12-02 15:46:57 [info][yii\db\Command::query] SELECT * FROM `data_all` `dataAll` WHERE `name`='yb'
2019-12-02 15:46:57 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='211.67', `open`='214.91', `high`='217.88', `low`='209.54', `close`='211.98', `diff`='-0.31', `diff_rate`='-0.15', `time`='2019-12-02 15:46:57' WHERE `name`='yb'
2019-12-02 15:46:57 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2019-12-02 15:46:57 [info][yii\db\Command::query] SELECT * from `order` where (order_state = 1 )
2019-12-02 15:46:57 [info][yii\web\Session::open] Session started
2019-12-02 15:46:57 [info][yii\db\Command::query] SELECT * FROM `data_all` `dataAll` WHERE `name`='btc'
2019-12-02 15:46:57 [info][yii\db\Command::query] SELECT price FROM data_btc WHERE time > "2019-12-02 00:00:00" ORDER BY price DESC LIMIT 1
2019-12-02 15:46:57 [info][yii\db\Command::query] SELECT price FROM data_btc WHERE time > "2019-12-02 00:00:00" ORDER BY price ASC LIMIT 1
2019-12-02 15:46:57 [info][yii\db\Command::query] SELECT
			            price,
			            time
			        FROM
			            data_btc
			        ORDER BY
			            id DESC
			        LIMIT 1
2019-12-02 15:46:57 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btc`
2019-12-02 15:46:57 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btc' AND kcu.table_name = 'data_btc'
2019-12-02 15:46:57 [info][yii\db\Command::execute] INSERT INTO `data_btc` (`price`, `time`) VALUES (21230.35, '2019-12-02 15:46:57')
2019-12-02 15:46:57 [info][yii\db\Command::query] SELECT * FROM `data_all` `dataAll` WHERE `name`='btc'
2019-12-02 15:46:57 [info][yii\db\Command::execute] UPDATE `data_all` SET `high`='21550.05', `low`='21206.35', `price`='21230.35', `time`='2019-12-02 15:46:57', `diff`='10955.86', `diff_rate`='106.63' WHERE `name`='btc'
2019-12-02 15:46:57 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2019-12-02 15:46:57 [info][yii\db\Command::query] SELECT * from `order` where (order_state = 1 )
2019-12-02 15:46:57 [info][yii\db\Command::query] SELECT
			            price,
			            time
			        FROM
			            data_tdb
			        ORDER BY
			            id DESC
			        LIMIT 1
2019-12-02 15:46:57 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_tdb`
2019-12-02 15:46:57 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_tdb' AND kcu.table_name = 'data_tdb'
2019-12-02 15:46:57 [info][yii\db\Command::execute] INSERT INTO `data_tdb` (`price`, `time`) VALUES ('5890.950', '2019-12-02 15:46:57')
2019-12-02 15:46:57 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='5890.950', `open`='5886.000', `high`='5908.500', `low`='5886.000', `close`='5864.000', `diff`='26.95', `diff_rate`='', `time`='2019-12-02 15:46:57' WHERE `name`='tdb'
2019-12-02 15:46:57 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2019-12-02 15:46:57 [info][yii\db\Command::query] SELECT * from `order` where (order_state = 1 )
2019-12-02 15:46:57 [info][yii\db\Command::query] SELECT
			            price,
			            time
			        FROM
			            data_a50
			        ORDER BY
			            id DESC
			        LIMIT 1
2019-12-02 15:46:57 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_a50`
2019-12-02 15:46:57 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_a50' AND kcu.table_name = 'data_a50'
2019-12-02 15:46:57 [info][yii\db\Command::execute] INSERT INTO `data_a50` (`price`, `time`) VALUES ('13605.000', '2019-12-02 15:46:57')
2019-12-02 15:46:57 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='13605.000', `open`='13582.500', `high`='13672.500', `low`='13582.500', `close`='13580.000', `diff`='25', `diff_rate`='', `time`='2019-12-02 15:46:57' WHERE `name`='a50'
2019-12-02 15:46:57 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2019-12-02 15:46:57 [info][yii\db\Command::query] SELECT * from `order` where (order_state = 1 )
2019-12-02 15:46:57 [info][yii\db\Command::query] SELECT
			            price,
			            time
			        FROM
			            data_hz
			        ORDER BY
			            id DESC
			        LIMIT 1
2019-12-02 15:46:57 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_hz`
2019-12-02 15:46:57 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_hz' AND kcu.table_name = 'data_hz'
2019-12-02 15:46:57 [info][yii\db\Command::execute] INSERT INTO `data_hz` (`price`, `time`) VALUES ('26484.200', '2019-12-02 15:46:57')
2019-12-02 15:46:57 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='26484.200', `open`='26373.000', `high`='26576.000', `low`='26337.000', `close`='26333.000', `diff`='151.2', `diff_rate`='', `time`='2019-12-02 15:46:57' WHERE `name`='hz'
2019-12-02 15:46:57 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2019-12-02 15:46:57 [info][yii\db\Command::query] SELECT * from `order` where (order_state = 1 )
